"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[32],{5651:(e,t,s)=>{s.r(t),s.d(t,{default:()=>tv});var a=s(5155),r=s(9749),i=s(2115),l=s(6535),o=s(9700),n=s(2042),c=s(5600),d=s(1335),m=s(4827);let u=(0,d.F)("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-card text-card-foreground",destructive:"text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90"}},defaultVariants:{variant:"default"}}),h=i.forwardRef((e,t)=>{let{className:s,variant:r,...i}=e;return(0,a.jsx)("div",{ref:t,role:"alert",className:(0,m.cn)(u({variant:r}),s),...i})});h.displayName="Alert",i.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("h5",{ref:t,className:(0,m.cn)("mb-1 font-medium leading-none tracking-tight",s),...r})}).displayName="AlertTitle";let g=i.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,m.cn)("text-sm [&_p]:leading-relaxed",s),...r})});g.displayName="AlertDescription";var p=s(2390),f=s(5693),x=s(2444),v=s(190),b=s(4741),y=s(6753),j=s(9309);class w extends i.Component{static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){this.setState({error:e,errorInfo:t}),console.error("Application Error:",e,t)}render(){return this.state.hasError?(0,a.jsx)("div",{className:"min-h-screen bg-background p-4 flex items-center justify-center",children:(0,a.jsxs)(v.Zp,{className:"w-full max-w-2xl",children:[(0,a.jsx)(v.aR,{children:(0,a.jsxs)(v.ZB,{className:"flex items-center gap-2 text-destructive",children:[(0,a.jsx)(p.A,{className:"h-5 w-5"}),"Application Error"]})}),(0,a.jsxs)(v.Wu,{className:"space-y-4",children:[(0,a.jsxs)(h,{variant:"destructive",children:[(0,a.jsx)(b.A,{className:"h-4 w-4"}),(0,a.jsx)(g,{children:"Something went wrong while processing your request. The application encountered an unexpected error."})]}),this.state.error&&(0,a.jsxs)("div",{className:"bg-muted p-4 rounded-lg",children:[(0,a.jsx)("h4",{className:"font-semibold mb-2",children:"Error Details:"}),(0,a.jsxs)("code",{className:"text-sm text-muted-foreground break-all",children:[this.state.error.name,": ",this.state.error.message]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("h4",{className:"font-semibold",children:"Troubleshooting Steps:"}),(0,a.jsxs)("ol",{className:"list-decimal list-inside text-sm text-muted-foreground space-y-1",children:[(0,a.jsx)("li",{children:"Try refreshing the page"}),(0,a.jsx)("li",{children:"Clear your browser cache and cookies"}),(0,a.jsx)("li",{children:"Ensure you have a stable internet connection"}),(0,a.jsx)("li",{children:"Try using a different browser"}),(0,a.jsx)("li",{children:"Check if your files are in supported formats"})]})]}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,a.jsxs)(x.$,{onClick:this.handleReset,variant:"outline",className:"flex-1 min-w-[120px]",children:[(0,a.jsx)(y.A,{className:"mr-2 h-4 w-4"}),"Try Again"]}),(0,a.jsxs)(x.$,{onClick:this.handleReload,variant:"default",className:"flex-1 min-w-[120px]",children:[(0,a.jsx)(y.A,{className:"mr-2 h-4 w-4"}),"Reload Page"]}),(0,a.jsxs)(x.$,{onClick:this.handleDownloadErrorReport,variant:"secondary",size:"sm",children:[(0,a.jsx)(j.A,{className:"mr-2 h-4 w-4"}),"Download Error Report"]})]}),(0,a.jsx)("div",{className:"text-center pt-4 border-t",children:(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"If the problem persists, please download the error report and contact support."})})]})]})}):this.props.children}constructor(e){super(e),this.handleReset=()=>{this.setState({hasError:!1,error:null,errorInfo:null})},this.handleReload=()=>{window.location.reload()},this.handleDownloadErrorReport=()=>{var e,t,s;let a=new Blob([JSON.stringify({timestamp:new Date().toISOString(),error:{name:null==(e=this.state.error)?void 0:e.name,message:null==(t=this.state.error)?void 0:t.message,stack:null==(s=this.state.error)?void 0:s.stack},errorInfo:this.state.errorInfo,userAgent:navigator.userAgent,url:window.location.href},null,2)],{type:"application/json"}),r=URL.createObjectURL(a),i=document.createElement("a");i.href=r,i.download="error-report-".concat(Date.now(),".json"),i.click(),URL.revokeObjectURL(r)},this.state={hasError:!1,error:null,errorInfo:null}}}var S=s(2124);let N=e=>{let t,s,i,l,o,n,c,d,m,u,h,g,p,f,x,b,y=(0,r.c)(37),{memoryUsage:j,memoryLimit:w,isProcessing:N,className:F}=e,P=j/1048576,C=Math.min(P/(void 0===w?500:w)*100,100),L=2*Math.PI*35,_=L-C/100*L;y[0]!==C?(t=()=>"memoryGradient-".concat(Math.round(C)),y[0]=C,y[1]=t):t=y[1];let k=t,M="fixed top-6 right-6 z-50 ".concat(void 0===F?"":F),A=k();y[2]!==C?(s=C<=30?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("stop",{offset:"0%",stopColor:"#e5e7eb"}),(0,a.jsx)("stop",{offset:"100%",stopColor:"oklch(0.647 0.164 42.18)"})]}):C<=70?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("stop",{offset:"0%",stopColor:"oklch(0.647 0.164 42.18)"}),(0,a.jsx)("stop",{offset:"100%",stopColor:"oklch(0.647 0.164 42.18)"})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("stop",{offset:"0%",stopColor:"oklch(0.647 0.164 42.18)"}),(0,a.jsx)("stop",{offset:"100%",stopColor:"#ef4444"})]}),y[2]=C,y[3]=s):s=y[3],y[4]!==A||y[5]!==s?(i=(0,a.jsx)("defs",{children:(0,a.jsx)("linearGradient",{id:A,x1:"0%",y1:"0%",x2:"100%",y2:"100%",gradientUnits:"objectBoundingBox",children:s})}),y[4]=A,y[5]=s,y[6]=i):i=y[6],y[7]===Symbol.for("react.memo_cache_sentinel")?(l=(0,a.jsx)("circle",{cx:"40",cy:"40",r:35,stroke:"#f3f4f6",strokeWidth:"3",fill:"none"}),y[7]=l):l=y[7];let E=N?"url(#".concat(k(),")"):"#e5e7eb";y[8]===Symbol.for("react.memo_cache_sentinel")?(o={transition:"stroke-dashoffset 0.3s ease-in-out, stroke 0.3s ease-in-out"},y[8]=o):o=y[8],y[9]!==_||y[10]!==E?(n=(0,a.jsx)("circle",{cx:"40",cy:"40",r:35,stroke:E,strokeWidth:"3",fill:"none",strokeLinecap:"round",strokeDasharray:L,strokeDashoffset:_,style:o}),y[9]=_,y[10]=E,y[11]=n):n=y[11],y[12]!==n||y[13]!==i?(c=(0,a.jsxs)("svg",{className:"absolute inset-0 w-full h-full transform -rotate-90",width:"80",height:"80",children:[i,l,n]}),y[12]=n,y[13]=i,y[14]=c):c=y[14];let T="w-5 h-5 ".concat(N?C>80?"text-red-500":C>60?"text-yellow-500":"text-primary":"text-gray-400");return y[15]!==T?(d=(0,a.jsx)("div",{children:(0,a.jsx)(S.A,{className:T})}),y[15]=T,y[16]=d):d=y[16],y[17]!==P?(m=Math.round(P),y[17]=P,y[18]=m):m=y[18],y[19]!==m?(u=(0,a.jsxs)("div",{children:[m,"MB"]}),y[19]=m,y[20]=u):u=y[20],y[21]!==C?(h=Math.round(C),y[21]=C,y[22]=h):h=y[22],y[23]!==h?(g=(0,a.jsxs)("div",{className:"text-[8px] text-gray-400",children:[h,"%"]}),y[23]=h,y[24]=g):g=y[24],y[25]!==u||y[26]!==g?(p=(0,a.jsxs)("div",{className:"text-[10px] font-medium text-gray-600 mt-1 leading-none text-center",children:[u,g]}),y[25]=u,y[26]=g,y[27]=p):p=y[27],y[28]!==d||y[29]!==p?(f=(0,a.jsxs)("div",{className:"relative flex flex-col items-center justify-center",children:[d,p]}),y[28]=d,y[29]=p,y[30]=f):f=y[30],y[31]!==c||y[32]!==f?(x=(0,a.jsx)(v.Zp,{className:"p-3 bg-white/90 backdrop-blur-sm border border-gray-200 shadow-lg",children:(0,a.jsxs)("div",{className:"relative w-20 h-20 flex items-center justify-center",children:[c,f]})}),y[31]=c,y[32]=f,y[33]=x):x=y[33],y[34]!==x||y[35]!==M?(b=(0,a.jsx)("div",{className:M,children:x}),y[34]=x,y[35]=M,y[36]=b):b=y[36],b};var F=s(8677),P=s(5003),C=s(4846);let L=e=>{let t,s,l,n,c,d,m,u,h,g,p,f,x,b,y,j,w,S=(0,r.c)(40),{className:N}=e,[L,_]=(0,i.useState)(null),[k,M]=(0,i.useState)(!1),[A,E]=(0,i.useState)(!1);if(S[0]===Symbol.for("react.memo_cache_sentinel")?(t=()=>{let e=navigator;e.getBattery?(E(!0),e.getBattery().then(e=>{let t=()=>{_(Math.round(100*e.level)),M(e.charging)};return t(),e.addEventListener("chargingchange",t),e.addEventListener("levelchange",t),()=>{e.removeEventListener("chargingchange",t),e.removeEventListener("levelchange",t)}}).catch(()=>{E(!1)})):E(!1)},s=[],S[0]=t,S[1]=s):(t=S[0],s=S[1]),(0,i.useEffect)(t,s),!A||null===L)return null;S[2]!==L||S[3]!==k?(l=()=>k?o.A:L<=20?F.A:L<=50?P.A:C.A,S[2]=L,S[3]=k,S[4]=l):l=S[4];let T=l;S[5]!==L||S[6]!==k?(n=()=>k?"#10b981":L<=20?"#ef4444":L<=50?"#eab308":"oklch(0.647 0.164 42.18)",S[5]=L,S[6]=k,S[7]=n):n=S[7];let D=n;S[8]!==T?(c=T(),S[8]=T,S[9]=c):c=S[9];let z=c,I="fixed top-6 left-6 z-50 ".concat(void 0===N?"":N),R="w-6 h-6 ".concat(k?"text-green-500":L<=20?"text-red-500":L<=50?"text-yellow-500":"text-primary");S[10]!==z||S[11]!==R?(d=(0,a.jsx)(z,{className:R}),S[10]=z,S[11]=R,S[12]=d):d=S[12],S[13]!==k?(m=k&&(0,a.jsx)(o.A,{className:"absolute -top-1 -right-1 w-3 h-3 text-green-500 animate-pulse"}),S[13]=k,S[14]=m):m=S[14],S[15]!==m||S[16]!==d?(u=(0,a.jsxs)("div",{className:"relative",children:[d,m]}),S[15]=m,S[16]=d,S[17]=u):u=S[17];let U="".concat(L,"%"),O=D();return S[18]!==U||S[19]!==O?(h=(0,a.jsx)("div",{className:"absolute left-0 top-0 h-full rounded-sm transition-all duration-300",style:{width:U,backgroundColor:O}}),S[18]=U,S[19]=O,S[20]=h):h=S[20],S[21]===Symbol.for("react.memo_cache_sentinel")?(g=(0,a.jsx)("div",{className:"absolute -right-1 top-1/2 transform -translate-y-1/2 w-1 h-1.5 bg-gray-300 rounded-r-sm"}),S[21]=g):g=S[21],S[22]!==h?(p=(0,a.jsxs)("div",{className:"relative w-8 h-3 bg-gray-200 rounded-sm border border-gray-300",children:[h,g]}),S[22]=h,S[23]=p):p=S[23],S[24]!==L?(f=(0,a.jsxs)("span",{className:"text-xs font-medium text-gray-600 min-w-[25px]",children:[L,"%"]}),S[24]=L,S[25]=f):f=S[25],S[26]!==p||S[27]!==f?(x=(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[p,f]}),S[26]=p,S[27]=f,S[28]=x):x=S[28],S[29]!==k?(b=k&&(0,a.jsx)("div",{className:"text-[10px] text-green-600 font-medium mt-0.5",children:"Charging"}),S[29]=k,S[30]=b):b=S[30],S[31]!==x||S[32]!==b?(y=(0,a.jsxs)("div",{className:"flex-1 min-w-[30px]",children:[x,b]}),S[31]=x,S[32]=b,S[33]=y):y=S[33],S[34]!==u||S[35]!==y?(j=(0,a.jsx)(v.Zp,{className:"p-2 bg-white/90 backdrop-blur-sm border border-gray-200 shadow-lg",children:(0,a.jsxs)("div",{className:"flex items-center gap-2 min-w-[80px]",children:[u,y]})}),S[34]=u,S[35]=y,S[36]=j):j=S[36],S[37]!==j||S[38]!==I?(w=(0,a.jsx)("div",{className:I,children:j}),S[37]=j,S[38]=I,S[39]=w):w=S[39],w};var _=s(6089);function k(e){let t,s,i=(0,r.c)(4);return i[0]!==e?({...t}=e,i[0]=e,i[1]=t):t=i[1],i[2]!==t?(s=(0,a.jsx)(_.bL,{"data-slot":"alert-dialog",...t}),i[2]=t,i[3]=s):s=i[3],s}function M(e){let t,s,i=(0,r.c)(4);return i[0]!==e?({...t}=e,i[0]=e,i[1]=t):t=i[1],i[2]!==t?(s=(0,a.jsx)(_.ZL,{"data-slot":"alert-dialog-portal",...t}),i[2]=t,i[3]=s):s=i[3],s}function A(e){let t,s,i,l,o=(0,r.c)(8);return o[0]!==e?({className:t,...s}=e,o[0]=e,o[1]=t,o[2]=s):(t=o[1],s=o[2]),o[3]!==t?(i=(0,m.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",t),o[3]=t,o[4]=i):i=o[4],o[5]!==s||o[6]!==i?(l=(0,a.jsx)(_.hJ,{"data-slot":"alert-dialog-overlay",className:i,...s}),o[5]=s,o[6]=i,o[7]=l):l=o[7],l}function E(e){let t,s,i,l,o,n=(0,r.c)(9);return n[0]!==e?({className:t,...s}=e,n[0]=e,n[1]=t,n[2]=s):(t=n[1],s=n[2]),n[3]===Symbol.for("react.memo_cache_sentinel")?(i=(0,a.jsx)(A,{}),n[3]=i):i=n[3],n[4]!==t?(l=(0,m.cn)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",t),n[4]=t,n[5]=l):l=n[5],n[6]!==s||n[7]!==l?(o=(0,a.jsxs)(M,{children:[i,(0,a.jsx)(_.UC,{"data-slot":"alert-dialog-content",className:l,...s})]}),n[6]=s,n[7]=l,n[8]=o):o=n[8],o}function T(e){let t,s,i,l,o=(0,r.c)(8);return o[0]!==e?({className:t,...s}=e,o[0]=e,o[1]=t,o[2]=s):(t=o[1],s=o[2]),o[3]!==t?(i=(0,m.cn)("flex flex-col gap-2 text-center sm:text-left",t),o[3]=t,o[4]=i):i=o[4],o[5]!==s||o[6]!==i?(l=(0,a.jsx)("div",{"data-slot":"alert-dialog-header",className:i,...s}),o[5]=s,o[6]=i,o[7]=l):l=o[7],l}function D(e){let t,s,i,l,o=(0,r.c)(8);return o[0]!==e?({className:t,...s}=e,o[0]=e,o[1]=t,o[2]=s):(t=o[1],s=o[2]),o[3]!==t?(i=(0,m.cn)("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",t),o[3]=t,o[4]=i):i=o[4],o[5]!==s||o[6]!==i?(l=(0,a.jsx)("div",{"data-slot":"alert-dialog-footer",className:i,...s}),o[5]=s,o[6]=i,o[7]=l):l=o[7],l}function z(e){let t,s,i,l,o=(0,r.c)(8);return o[0]!==e?({className:t,...s}=e,o[0]=e,o[1]=t,o[2]=s):(t=o[1],s=o[2]),o[3]!==t?(i=(0,m.cn)("text-lg font-semibold",t),o[3]=t,o[4]=i):i=o[4],o[5]!==s||o[6]!==i?(l=(0,a.jsx)(_.hE,{"data-slot":"alert-dialog-title",className:i,...s}),o[5]=s,o[6]=i,o[7]=l):l=o[7],l}function I(e){let t,s,i,l,o=(0,r.c)(8);return o[0]!==e?({className:t,...s}=e,o[0]=e,o[1]=t,o[2]=s):(t=o[1],s=o[2]),o[3]!==t?(i=(0,m.cn)("text-muted-foreground text-sm",t),o[3]=t,o[4]=i):i=o[4],o[5]!==s||o[6]!==i?(l=(0,a.jsx)(_.VY,{"data-slot":"alert-dialog-description",className:i,...s}),o[5]=s,o[6]=i,o[7]=l):l=o[7],l}function R(e){let t,s,i,l,o=(0,r.c)(8);return o[0]!==e?({className:t,...s}=e,o[0]=e,o[1]=t,o[2]=s):(t=o[1],s=o[2]),o[3]!==t?(i=(0,m.cn)((0,x.r)(),t),o[3]=t,o[4]=i):i=o[4],o[5]!==s||o[6]!==i?(l=(0,a.jsx)(_.rc,{className:i,...s}),o[5]=s,o[6]=i,o[7]=l):l=o[7],l}function U(e){let t,s,i,l,o=(0,r.c)(8);return o[0]!==e?({className:t,...s}=e,o[0]=e,o[1]=t,o[2]=s):(t=o[1],s=o[2]),o[3]!==t?(i=(0,m.cn)((0,x.r)({variant:"outline"}),t),o[3]=t,o[4]=i):i=o[4],o[5]!==s||o[6]!==i?(l=(0,a.jsx)(_.ZD,{className:i,...s}),o[5]=s,o[6]=i,o[7]=l):l=o[7],l}var O=s(8770),V=s(6061);class B{reset(){this.currentPhase="parsing-subtitles",this.phaseProgress=0,this.lastReportedProgress=0,this.progressHistory=[]}onProgress(e){return this.callbacks.add(e),()=>this.callbacks.delete(e)}onLog(e){return this.logCallbacks.add(e),()=>this.logCallbacks.delete(e)}setPhase(e,t){if(e===this.currentPhase)return;this.currentPhase=e,this.phaseProgress=0,this.lastReportedProgress=0;let s=this.phaseConfigs[e],a=t||"Phase ".concat(s.number,": ").concat(s.name," - Starting...");this.emitUpdate(a),this.updatePhase(0,"Phase ".concat(s.number,": ").concat(s.name," - 0%"))}updatePhase(e,t,s){if((e=Math.max(0,Math.min(100,e)))<=this.phaseProgress)return;this.phaseProgress=e;let a=0===this.lastReportedProgress&&e>0,r=e-this.lastReportedProgress>=.1;if(a||r){this.lastReportedProgress=e;let a=this.phaseConfigs[this.currentPhase],r=t||"".concat(a.name,": ").concat(e.toFixed(2),"%");this.emitUpdate(r,s)}}updateVideoProgress(e,t,s){if("processing-video"!==this.currentPhase&&this.setPhase("processing-video"),t<=0)return;let a=Math.min(e/t*100,100),r=Math.max(0,t-e),i=r>0?"".concat(r.toFixed(1),"s remaining"):"Almost done",l="Processing video: ".concat(e.toFixed(1),"s / ").concat(t.toFixed(1),"s");this.updatePhase(a,s||l,{processedTime:e,totalDuration:t,eta:i})}updateSubtitleProgress(e,t,s){if("parsing-subtitles"!==this.currentPhase&&this.setPhase("parsing-subtitles"),t<=0)return;let a=Math.min(e/t*100,100),r="Parsing subtitles: ".concat(e,"/").concat(t);this.updatePhase(a,s||r,{currentSubtitle:e,totalSubtitles:t})}completePhase(e,t){this.updatePhase(100,t),e&&setTimeout(()=>this.setPhase(e),100)}complete(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Processing completed successfully";this.setPhase("completed",e),this.updatePhase(100,e),setTimeout(()=>{this.reset()},1e3)}error(e,t){this.setPhase("error",e),this.log("❌ Error: ".concat(e)),t&&this.log("Error details: ".concat(t.message))}getState(){let e=this.progressHistory[this.progressHistory.length-1],t=this.phaseConfigs[this.currentPhase];return{phase:this.currentPhase,phaseProgress:this.phaseProgress,phaseNumber:t.number,totalPhases:2,message:(null==e?void 0:e.message)||"",isComplete:"completed"===this.currentPhase,hasError:"error"===this.currentPhase}}getHistory(){return[...this.progressHistory]}parseFFmpegLog(e,t){if("processing-video"!==this.currentPhase||!t)return!1;let s=e.match(/time=(\d{2}:\d{2}:\d{2}[\.,]\d{2,3})/i);if(s){let a=this.parseFFmpegTime(s[1]);return this.updateVideoProgress(a,t,e),!0}let a=e.match(/frame=\s*(\d+)/i),r=e.match(/fps=\s*([\d.]+)/i);if(a&&r){let s=parseInt(a[1]),i=parseFloat(r[1]);if(i>0)return this.updateVideoProgress(s/i,t,e),!0}return!1}parseFFmpegTime(e){try{let t=e.replace(",",".").split(":").map(e=>parseFloat(e));if(3===t.length)return 3600*t[0]+60*t[1]+t[2];if(2===t.length)return 60*t[0]+t[1];if(1===t.length)return t[0];return 0}catch(e){return 0}}emitUpdate(e,t){let s=this.phaseConfigs[this.currentPhase],a={phase:this.currentPhase,phaseProgress:this.phaseProgress,phaseNumber:s.number,totalPhases:2,message:e,timestamp:Date.now(),metadata:t};this.progressHistory.push(a),this.progressHistory.length>100&&this.progressHistory.shift(),this.callbacks.forEach(e=>{try{e(a)}catch(e){console.error("Error in progress callback:",e)}})}log(e){this.logCallbacks.forEach(t=>{try{t(e)}catch(e){console.error("Error in log callback:",e)}})}constructor(){this.currentPhase="parsing-subtitles",this.phaseProgress=0,this.lastReportedProgress=0,this.progressHistory=[],this.callbacks=new Set,this.logCallbacks=new Set,this.phaseConfigs={"parsing-subtitles":{name:"Phase 1: Generating Subtitle Images",number:1},"preparing-ffmpeg":{name:"Phase 2: FFmpeg Setup",number:2},"building-filtergraph":{name:"Phase 3: Building Filter Graph",number:3},"processing-video":{name:"Phase 4: Encoding Video with Subtitles",number:4},completed:{name:"Processing Complete",number:5},error:{name:"Processing Failed",number:0}},this.reset()}}let q=new B;class W{async loadFFmpeg(e){let{onLog:t,onProgress:s}=e;if(this.isFFmpegLoaded)return void t("FFmpeg already loaded");if(this.isFFmpegLoading)return void t("FFmpeg loading in progress");this.isFFmpegLoading=!0,q.reset(),q.onLog(t),q.onProgress(e=>s(e.phaseProgress/100));try{q.setPhase("parsing-subtitles","Loading FFmpeg..."),this.ffmpeg.on("log",e=>{let{message:s}=e;t(s)}),this.ffmpeg.on("progress",e=>{let{progress:t}=e;q.updatePhase(100*t,"Loading FFmpeg core...")}),q.updatePhase(10,"Loading FFmpeg core..."),await this.ffmpeg.load({coreURL:"https://unpkg.com/@ffmpeg/core@0.12.6/dist/umd/ffmpeg-core.js",wasmURL:"https://unpkg.com/@ffmpeg/core@0.12.6/dist/umd/ffmpeg-core.wasm"}),q.complete("FFmpeg loaded successfully"),this.isFFmpegLoaded=!0}catch(e){throw q.error("FFmpeg loading failed: ".concat(e),e instanceof Error?e:Error(String(e))),e}finally{this.isFFmpegLoading=!1}}async fetchGoogleFonts(){let e=[{family:"Roboto",category:"sans-serif"},{family:"Open Sans",category:"sans-serif"},{family:"Lato",category:"sans-serif"},{family:"Montserrat",category:"sans-serif"},{family:"Noto Sans",category:"sans-serif"},{family:"Source Sans Pro",category:"sans-serif"},{family:"Poppins",category:"sans-serif"},{family:"Raleway",category:"sans-serif"},{family:"Merriweather",category:"serif"},{family:"Playfair Display",category:"serif"}];for(let t of e)if(!this.loadedFonts.has(t.family)){let e=document.createElement("link");e.rel="stylesheet",e.href="https://fonts.googleapis.com/css2?family=".concat(t.family.replace(/ /g,"+")),document.head.appendChild(e),this.loadedFonts.add(t.family)}return e}async getVideoInfo(e){let t=document.createElement("video");return t.src=URL.createObjectURL(e),new Promise((s,a)=>{t.onloadedmetadata=()=>{let a={width:t.videoWidth,height:t.videoHeight,duration:t.duration,size:e.size,fps:30};URL.revokeObjectURL(t.src),s(a)},t.onerror=()=>a(Error("Could not get video info"))})}filterSubtitlesByDuration(e,t){let s=e.filter(e=>e.startTime<t).map(e=>({...e,endTime:Math.min(e.endTime,t)})),a=s.reduce((e,t)=>e+(t.endTime-t.startTime),0),r=s.length>0?a/s.length:0,i={total:e.length,relevant:s.length,filtered:e.length-s.length,avgDuration:r,totalDuration:a};return{filteredSubtitles:s,stats:i}}async parseSubtitleFile(e){var t;let s=await e.text(),a=(null==(t=e.name.split(".").pop())?void 0:t.toLowerCase())||"srt";return["ass","ssa"].includes(a)?s=this.convertAssToSrt(s):"vtt"===a&&(s=this.convertVttToSrt(s)),this.parseSrtFile(s)}parseSrtFile(e){let t=[];for(let s of e.trim().split(/\n\s*\n/)){let e=s.trim().split("\n");if(e.length>=3){let s=parseInt(e[0]),a=e[1].match(/(\d{2}):(\d{2}):(\d{2})[,.](\d{3})\s*-->\s*(\d{2}):(\d{2}):(\d{2})[,.](\d{3})/);if(a&&!isNaN(s)){let r=3600*parseInt(a[1])+60*parseInt(a[2])+parseInt(a[3])+parseInt(a[4])/1e3,i=3600*parseInt(a[5])+60*parseInt(a[6])+parseInt(a[7])+parseInt(a[8])/1e3,l=e.slice(2).join(" ").replace(/\r?\n/g," ").replace(/[<>]/g,"").replace(/\{[^}]*\}/g,"").replace(/[^\w\s.,!?;:()\-]/g,"").trim();l&&r<i&&l.length>0&&t.push({index:s,startTime:r,endTime:i,text:l.substring(0,100)})}}}return t.sort((e,t)=>e.startTime-t.startTime)}async createSubtitleImages(e,t,s,a,r,i,l,o){let n={};o("\uD83D\uDDBC️ Creating ".concat(e.length," subtitle images with font ").concat(i));for(let c=0;c<e.length;c+=5){let d=e.slice(c,c+5);for(let e of d){let l=document.createElement("canvas");l.width=t,l.height=s;let o=l.getContext("2d");o.clearRect(0,0,t,s),o.font="".concat(a,"px '").concat(i,"', sans-serif"),o.fillStyle=r,o.textAlign="center",o.textBaseline="bottom",o.strokeStyle="#000000",o.lineWidth=2;let c=t/2,d=s-50;o.strokeText(e.text,c,d),o.fillText(e.text,c,d);let m=await new Promise(e=>{l.toBlob(t=>e(t),"image/png",1)}),u=await m.arrayBuffer();n["subtitle_".concat(e.index,".png")]=new Uint8Array(u)}l(Math.round((c+d.length)/e.length*30)),await new Promise(e=>setTimeout(e,0)),o("✅ Created ".concat(Math.min(c+5,e.length),"/").concat(e.length," subtitle images"))}return n}async processVideo(e){let{videoFile:t,relevantSubtitles:s,videoInfo:a,outputFormat:r,subtitleStyle:i,onLog:l,onProgress:o,processingOptions:n}=e,c={quality:"balanced",crf:23,memoryLimit:500,threads:0,useDiskCache:!0,...n};return this.isFFmpegLoaded||await this.loadFFmpeg({onLog:l,onProgress:e=>o(e)}),q.reset(),q.onLog(l),q.onProgress(e=>{let t;"parsing-subtitles"===e.phase?t="subtitle-generation":"preparing-ffmpeg"===e.phase?t="ffmpeg-setup":"building-filtergraph"===e.phase?t="filtergraph":"processing-video"===e.phase&&(t="video-processing"),o(e.phaseProgress,t)}),q.setPhase("parsing-subtitles","Starting processing for ".concat(s.length," subtitles")),await this.processVideoSequential(t,s,a,r,i,l,o,c)}async processVideoSequential(e,t,s,a,r,i,l,o){let n=performance.now(),c="input.mp4",d="output.".concat(a);try{await this.ffmpeg.writeFile(c,await (0,V.t2)(e));let l=await this.createOptimizedSubtitleImages(t,s.width,s.height,r,(e,t)=>q.updateSubtitleProgress(e,t,"Creating subtitle image ".concat(e,"/").concat(t)),i,o);!this.diskCacheEnabled&&Object.keys(l).length>0&&await this.batchWriteFiles(l),q.updatePhase(100,"All subtitle images created"),q.setPhase("preparing-ffmpeg","Preparing FFmpeg setup...");try{await this.processWithUnifiedFilter(c,d,t,a,e=>q.updatePhase(e,"Processing video: ".concat(e.toFixed(1),"%")),i,o,s.duration)}catch(e){if((null==o?void 0:o.quality)==="high"&&e instanceof Error&&e.message.includes("FS error")){i("⚠️ High quality mode failed with FS error, falling back to balanced quality...");let e={...o,quality:"balanced"};await this.processWithUnifiedFilter(c,d,t,a,e=>q.updatePhase(e,"Processing video (fallback): ".concat(e.toFixed(1),"%")),i,e,s.duration)}else throw e}q.updatePhase(100,"Reading final output file...");let m=await this.ffmpeg.readFile(d);if(!m||0===m.length)throw Error("Final output file is empty");await this.cleanupSequentialFiles(c,d,t),q.updatePhase(100,"Processing completed successfully");let u=performance.now()-n;return q.complete("Processing completed in ".concat((u/1e3).toFixed(1),"s")),this.recordPerformanceMetrics({startTime:n,endTime:performance.now(),totalDuration:s.duration,processingTime:u,subtitlesProcessed:t.length,strategy:"optimized_sequential",avgTimePerSubtitle:u/t.length}),await this.terminateAndResetFFmpeg(),URL.createObjectURL(new Blob(["string"==typeof m?m:new Uint8Array(m)],{type:"mp4"===a?"video/mp4":"video/webm"}))}catch(e){throw q.error("Processing failed: ".concat(e),e instanceof Error?e:Error(String(e))),await this.cleanupSequentialFiles(c,d,t),await this.forceCleanup(t),e}finally{await this.forceCleanup(t)}}async createOptimizedSubtitleImages(e,t,s,a,r,i,l){let o,n={},c=this.getMemoryUsage()/1048576,d=this.memoryLimit-c,m=(null==l?void 0:l.quality)==="high";o=e.length>100?Math.max(1,Math.min(m?3:5,Math.floor(d/10))):e.length>50?Math.max(2,Math.min(m?5:8,Math.floor(d/8))):Math.max(3,Math.min(m?7:10,Math.floor(d/5))),i("\uD83D\uDDBC️ Creating ".concat(e.length," subtitle images with advanced styling (batches of ").concat(o,")")),i("\uD83D\uDCBE Available memory: ".concat(d.toFixed(1),"MB / ").concat(this.memoryLimit,"MB")),i("\uD83C\uDFA8 Style: ".concat(a.fontSize,"px ").concat(a.fontFamily,", color: ").concat(a.fontColor)),a.backgroundColor&&"transparent"!==a.backgroundColor&&i("\uD83D\uDCE6 Background: ".concat(a.backgroundColor," (opacity: ").concat(a.opacity||1,")")),a.outlineWidth&&a.outlineWidth>0&&i("\uD83D\uDD32 Outline: ".concat(a.outlineWidth,"px ").concat(a.outlineColor||"#000000"));let u=document.createElement("canvas"),h=window.devicePixelRatio||1,g=2*h,p=Math.round(t*g),f=Math.round(s*g);u.width=p,u.height=f;let x=u.getContext("2d",{alpha:!0,desynchronized:!1,colorSpace:"srgb"});x.imageSmoothingEnabled=!0,x.imageSmoothingQuality="high",x.scale(g,g),i("\uD83C\uDFA8 Ultra-HD canvas: ".concat(p,"x").concat(f," (DPR: ").concat(h,", Additional: ").concat(2,"x, Total: ").concat(g,"x)"));let v=document.createElement("canvas");v.width=t,v.height=s;let b=v.getContext("2d",{alpha:!0,desynchronized:!1,colorSpace:"srgb"});b.imageSmoothingEnabled=!0,b.imageSmoothingQuality="high";for(let l=0;l<e.length;l+=o){let c=this.getMemoryUsage()/1048576;c>.9*this.memoryLimit&&(i("⚠️ High memory usage detected (".concat(c.toFixed(1),"MB), forcing garbage collection...")),window.gc&&window.gc(),await new Promise(e=>setTimeout(e,100)));let d=e.slice(l,l+o);for(let i=0;i<d.length;i++){let o=d[i];if(x.clearRect(0,0,t,s),this.renderSubtitleOnCanvas(x,o.text,t,s,a),b.clearRect(0,0,t,s),g>2){let e=document.createElement("canvas"),a=Math.ceil(g/2),r=Math.round(t*a),i=Math.round(s*a);e.width=r,e.height=i;let l=e.getContext("2d");l.imageSmoothingEnabled=!0,l.imageSmoothingQuality="high",l.drawImage(u,0,0,p,f,0,0,r,i),b.drawImage(e,0,0,r,i,0,0,t,s)}else b.drawImage(u,0,0,p,f,0,0,t,s);let c=await new Promise(e=>{v.toBlob(t=>e(t),"image/png")}),m=await c.arrayBuffer(),h="subtitle_".concat(o.index,".png");n[h]=new Uint8Array(m),this.diskCacheEnabled&&(await this.ffmpeg.writeFile(h,n[h]),delete n[h]),r(l+i+1,e.length)}await new Promise(e=>setTimeout(e,5));let m=Math.min(l+o,e.length);i("✅ Created ".concat(m,"/").concat(e.length," subtitle images"))}return n}renderSubtitleOnCanvas(e,t,s,a,r){let{x:i,y:l,textAlign:o,textBaseline:n}=this.calculateCanvasPosition(s,a,r);e.font="bold ".concat(r.fontSize,"px '").concat(r.fontFamily,"', -apple-system, BlinkMacSystemFont, 'Segoe UI', Arial, sans-serif"),e.textAlign=o,e.textBaseline=n,e.imageSmoothingEnabled=!0,e.imageSmoothingQuality="high",e.lineJoin="round",e.lineCap="round",e.miterLimit=10;let c=Math.round(+i)/1,d=Math.round(+l)/1;e.globalAlpha=r.opacity||1;let m=e.measureText(t).width,u=1.2*r.fontSize;if(r.backgroundColor&&"transparent"!==r.backgroundColor&&this.drawBackgroundBox(e,c,d,m,u,r,o,n),r.outlineWidth&&r.outlineWidth>0){e.strokeStyle=r.outlineColor||"#000000",e.lineWidth=1.5*r.outlineWidth,e.miterLimit=4,e.save(),e.globalCompositeOperation="destination-over";for(let s=0;s<3;s++){let a=.5*s;e.strokeText(t,c+a,d+a),e.strokeText(t,c-a,d-a),e.strokeText(t,c+a,d-a),e.strokeText(t,c-a,d+a)}e.restore()}e.fillStyle=r.fontColor,e.fillText(t,c,d),r.shadow&&(e.save(),e.globalCompositeOperation="destination-over",e.shadowColor="rgba(0, 0, 0, 0.7)",e.shadowBlur=8,e.shadowOffsetX=4,e.shadowOffsetY=4,e.filter="blur(0.5px)",e.fillStyle=r.fontColor,e.fillText(t,c,d),e.restore()),e.globalAlpha=1}calculateCanvasPosition(e,t,s){let a,r,i,l,o=s.marginX||0;switch(s.alignment){case"left":a=50+o,r="left";break;case"right":a=e-50+o,r="right";break;default:a=e/2+o,r="center"}let n=s.marginY||0;switch(s.position){case"top":i=50+n,l="top";break;case"center":i=t/2+n,l="middle";break;default:i=t-50+n,l="bottom"}return{x:a,y:i,textAlign:r,textBaseline:l}}drawBackgroundBox(e,t,s,a,r,i,l,o){let n,c;switch(l){case"left":n=t-8;break;case"right":n=t-a-8;break;default:n=t-a/2-8}switch(o){case"top":c=s-8;break;case"middle":c=s-r/2-8;break;default:c=s-r-8}e.fillStyle=i.backgroundColor,e.fillRect(n,c,a+16,r+16)}async batchWriteFiles(e){let t=Object.keys(e);for(let s=0;s<t.length;s+=5){let a=t.slice(s,s+5).map(t=>this.ffmpeg.writeFile(t,e[t]));await Promise.all(a),s+5<t.length&&await new Promise(e=>setTimeout(e,1))}}parseFFmpegTime(e){try{let t=e.replace(",",".").split(":").map(e=>parseFloat(e));if(3===t.length)return 3600*t[0]+60*t[1]+t[2];if(2===t.length)return 60*t[0]+t[1];if(1===t.length)return t[0];return 0}catch(e){return 0}}async processWithUnifiedFilter(e,t,s,a,r,i,l,o){var n;q.updatePhase(0,"Building optimized filter complex...");let c=this.buildOptimizedFilterComplex(s);i("Preparing FFmpeg configuration...");let d=(null==l?void 0:l.quality)==="fast"?"ultrafast":(null==l||l.quality,"medium"),m=(null==l?void 0:l.crf)||((null==l?void 0:l.quality)==="fast"?28:(null==l?void 0:l.quality)==="high"?18:20),u=(null==l?void 0:l.threads)||0,h=(null==l||l.quality,"fastdecode"),g=(null==l?void 0:l.quality)==="fast"?"0":(null==l?void 0:l.quality)==="high"?"3":"2",p=(null==l?void 0:l.quality)==="fast"?"1":(null==l?void 0:l.quality)==="high"?"5":"3",f=Math.floor(1024*((null==l?void 0:l.memoryLimit)||500)*1024/1024),x=["-i",e,...s.flatMap(e=>["-i","subtitle_".concat(e.index,".png")]),"-filter_complex",c,"-map","[final_output]","-map","0:a?","-c:v","libx264","-preset",d,"-crf",m.toString(),"-c:a","copy","-movflags","+faststart","-avoid_negative_ts","make_zero","-threads",u.toString(),"-tune",h,"-bf",g,"-refs",p,"-g",(null==l?void 0:l.quality)==="fast"?"120":"250",...(null==l?void 0:l.quality)!=="high"?["-bufsize","".concat(f,"k"),"-maxrate","".concat(Math.floor(f/4),"k")]:[],"-pix_fmt","yuv420p",...(null==l?void 0:l.quality)==="fast"?["-flags","+cgop"]:[],"-y",t];i("\uD83C\uDFAF Quality Mode: ".concat((null==l||null==(n=l.quality)?void 0:n.toUpperCase())||"BALANCED")),i("⚙️ FFmpeg Preset: ".concat(d," | CRF: ").concat(m," | Threads: ").concat(0===u?"auto":u)),i("\uD83D\uDD27 Advanced: tune=".concat(h,", b-frames=").concat(g,", refs=").concat(p)),i("\uD83D\uDCBE Memory: ".concat((null==l?void 0:l.memoryLimit)||500,"MB limit | Buffer: ").concat(f,"KB")),q.updatePhase(0,"Starting video encoding with ".concat(0===u?"all available":u," threads (preset: ").concat(d,", CRF: ").concat(m,")"));let v=0,b=s.length,y=new Set,j=e=>{let{message:t}=e;if(i(t),/Input #\d+,\s*png_pipe,\s*from 'subtitle_\d+\.png':/i.test(t)){let e=Math.round((v=Math.min(b,v+1))/Math.max(1,b)*100);q.updatePhase(e,"Registering subtitle inputs: ".concat(v,"/").concat(b))}/^Stream mapping:/i.test(t)&&(q.setPhase("building-filtergraph","Starting filter graph build..."),q.updatePhase(1,"Analyzing streams and overlays..."));let s=t.match(/^\s*Stream #(\d+):0 \(png\) -> overlay/i);if(s){let e=parseInt(s[1],10);if(!Number.isNaN(e)){y.add(e);let t=Math.min(b,y.size),s=Math.round(t/Math.max(1,b)*100);q.updatePhase(s,"Mapping overlays: ".concat(t,"/").concat(b))}}(/time=\d{2}:\d{2}:\d{2}[\.,]\d+/.test(t)||/frame=\s*\d+/i.test(t))&&(q.setPhase("processing-video","Starting video encoding..."),q.parseFFmpegLog(t,o),this.ffmpeg.off("log",j))};this.ffmpeg.on("log",j);let w=e=>{let{message:t}=e;i(t),q.parseFFmpegLog(t,o)};this.ffmpeg.on("log",w);try{await this.ffmpeg.exec(x),q.updatePhase(100,"Video encoding completed successfully")}catch(e){throw e}finally{this.ffmpeg.off("log",w)}}buildOptimizedFilterComplex(e){if(0===e.length)return"[0:v]copy[final_output]";let t="[0:v]";return e.forEach((s,a)=>{let r=a+1,i=a===e.length-1?"final_output":"overlay".concat(a);0===a?t+="[".concat(r,":v]overlay=0:0:enable='between(t,").concat(s.startTime.toFixed(3),",").concat(s.endTime.toFixed(3),")'[").concat(i,"]"):t+=";[overlay".concat(a-1,"][").concat(r,":v]overlay=0:0:enable='between(t,").concat(s.startTime.toFixed(3),",").concat(s.endTime.toFixed(3),")'[").concat(i,"]")}),t}async cleanupSequentialFiles(e,t,s){let a=[];for(let r of(a.push(this.ffmpeg.deleteFile(e).catch(()=>{}).then(()=>{}),this.ffmpeg.deleteFile(t).catch(()=>{}).then(()=>{})),s))a.push(this.ffmpeg.deleteFile("subtitle_".concat(r.index,".png")).catch(()=>{}).then(()=>{}));await Promise.all(a)}convertVttToSrt(e){let t=e.split("\n"),s="",a=1,r=!1,i="",l="",o="";for(let e of t)if(e.includes("--\x3e")){let t=e.match(/(\d{2}:\d{2}:\d{2}\.\d{3}) --> (\d{2}:\d{2}:\d{2}\.\d{3})/);t&&(i=t[1].replace(".",","),l=t[2].replace(".",","),r=!0,o="")}else r&&""===e.trim()?(o.trim()&&(s+="".concat(a,"\n").concat(i," --\x3e ").concat(l,"\n").concat(o.trim(),"\n\n"),a++),r=!1):r&&""!==e.trim()&&!e.startsWith("NOTE")&&(o+=e+"\n");return s}convertAssToSrt(e){let t=e.split("\n"),s="",a=1;for(let e of t)if(e.startsWith("Dialogue:")){let t=e.split(",");if(t.length>=10){let e=t[1].trim(),r=t[2].trim(),i=t.slice(9).join(",").replace(/\{[^}]*\}/g,"").replace(/\\N/g," "),l=this.convertAssTimeToSrt(e),o=this.convertAssTimeToSrt(r);i.trim()&&(s+="".concat(a,"\n").concat(l," --\x3e ").concat(o,"\n").concat(i.trim(),"\n\n"),a++)}}return s}convertAssTimeToSrt(e){let t=e.split(":");if(3===t.length){let e=t[0].padStart(2,"0"),s=t[1],a=t[2].split("."),r=a[0],i=(10*parseInt(a[1]||"00")).toString().padStart(3,"0");return"".concat(e,":").concat(s,":").concat(r,",").concat(i)}return e}async cleanupSegmentFiles(e){for(let t of e)try{await this.ffmpeg.deleteFile(t)}catch(e){}try{await this.ffmpeg.deleteFile("concat_list.txt"),await this.ffmpeg.deleteFile("input.mp4")}catch(e){}}async forceCleanup(e){try{let t=["input.mp4","output.mp4","output.webm","output.mkv","output.avi","concat_list.txt"];if(e)for(let s of e)t.push("subtitle_".concat(s.index,".png"));else for(let e=0;e<1e3;e++)t.push("subtitle_".concat(e,".png"));let s=t.map(async e=>{try{await this.ffmpeg.deleteFile(e)}catch(e){}});await Promise.all(s),q.reset(),console.log("\uD83E\uDDF9 FFmpeg cleanup completed - all files and memory freed")}catch(e){console.warn("Warning during FFmpeg cleanup:",e)}}recordPerformanceMetrics(e){this.performanceMetrics.push(e),this.performanceMetrics.length>10&&this.performanceMetrics.shift()}getPerformanceMetrics(){return[...this.performanceMetrics]}getMemoryUsage(){return"memory"in performance?performance.memory.usedJSHeapSize||0:Math.max(0x3200000,10*this.performanceMetrics.length*1048576)}isUsingWorkers(){return!1}resetFFmpegState(){this.isFFmpegLoaded=!1,this.isFFmpegLoading=!1}getFFmpegLoadingState(){return{loaded:this.isFFmpegLoaded,loading:this.isFFmpegLoading}}getProgressManager(){return q}async cancelProcessing(){try{this.ffmpeg.terminate()}catch(e){e instanceof Error&&"called FFmpeg.terminate()"===e.message?console.log("\uD83D\uDED1 FFmpeg processing terminated successfully"):console.warn("Unexpected error during FFmpeg termination:",e)}this.isFFmpegLoaded=!1,this.isFFmpegLoading=!1,q.reset()}async terminateAndResetFFmpeg(){try{console.log("\uD83D\uDD04 Terminating FFmpeg to reset state for next processing..."),this.ffmpeg.terminate()}catch(e){e instanceof Error&&"called FFmpeg.terminate()"===e.message?console.log("✅ FFmpeg terminated successfully - ready for next video"):console.warn("Unexpected error during FFmpeg termination:",e)}this.isFFmpegLoaded=!1,this.isFFmpegLoading=!1,console.log("\uD83D\uDD27 FFmpeg state reset - next video will reload FFmpeg from scratch")}async processBatchSubtitles(e,t,s,a,r,i,l){i("Starting batch processing: ".concat(t.length," subtitle files"));let o=[];for(let n=0;n<t.length;n++){let c=t[n],d=n/t.length*100;i("Processing subtitle file ".concat(n+1,"/").concat(t.length,": ").concat(c.name)),l(d);try{let n=await this.parseSubtitleFile(c),{filteredSubtitles:m}=this.filterSubtitlesByDuration(n,s.duration),u=await this.processVideoWithStrategy(e,m,s,a,r,e=>i("[".concat(c.name,"] ").concat(e)),e=>l(d+e/t.length));o.push({url:u,filename:"".concat(e.name.split(".")[0],"_").concat(c.name.split(".")[0],".mp4")})}catch(e){i("Error processing ".concat(c.name,": ").concat(e instanceof Error?e.message:String(e)))}}return l(100),i("Batch processing completed: ".concat(o.length,"/").concat(t.length," files processed successfully")),o}async processVideoWithStrategy(e,t,s,a,r,i,l){return await this.processVideoSequential(e,t,s,"mp4",a,i,l,r)}async mergeSubtitleLanguages(e,t){let s=[],a=1;for(let{file:r,language:i,position:l}of(t("Merging ".concat(e.length," subtitle languages")),e)){let e=await this.parseSubtitleFile(r);for(let t of e)s.push({...t,index:a++,text:"[".concat(i,"] ").concat(t.text),style:{fontSize:24,fontColor:"top"===l?"#FFFF00":"#FFFFFF",fontFamily:"Arial",position:l,alignment:"center"}});t("Added ".concat(e.length," subtitles for ").concat(i," (").concat(l,")"))}return s.sort((e,t)=>e.startTime-t.startTime),t("Merged total: ".concat(s.length," subtitle entries")),s}constructor(e){this.loadedFonts=new Set,this.performanceMetrics=[],this.memoryUsage=0,this.tempFileCounter=0,this.diskCacheEnabled=!0,this.memoryLimit=500,this.isFFmpegLoaded=!1,this.isFFmpegLoading=!1,this.ffmpeg=e}}var H=s(3372);class Z{async initialize(e){if(!this.isInitialized&&!this.isInitializing){this.isInitializing=!0;try{await this.processor.loadFFmpeg({onLog:e.onLog,onProgress:t=>e.onProgress(Math.round(100*t),"initialization")}),await this.loadGoogleFonts(e.onLog),this.isInitialized=!0}finally{this.isInitializing=!1}}}async getVideoInfo(e){return this.processor.getVideoInfo(e)}async parseSubtitleFile(e){return this.processor.parseSubtitleFile(e)}filterSubtitlesByDuration(e,t){return this.processor.filterSubtitlesByDuration(e,t)}async processVideo(e,t){this.startMemoryMonitoring(t.onMemoryUpdate);try{return await this.processor.processVideo({videoFile:e.videoFile,relevantSubtitles:e.relevantSubtitles,videoInfo:e.videoInfo,outputFormat:e.outputFormat,subtitleStyle:e.subtitleStyle,onLog:t.onLog,onProgress:t.onProgress,processingOptions:e.processingOptions})}finally{this.stopMemoryMonitoring()}}async forceCleanup(e){await this.processor.forceCleanup(e)}getMemoryUsage(){return this.processor.getMemoryUsage()}startMemoryMonitoring(e){this.memoryMonitorInterval=setInterval(()=>{e(this.getMemoryUsage())},2e3)}stopMemoryMonitoring(){this.memoryMonitorInterval&&(clearInterval(this.memoryMonitorInterval),this.memoryMonitorInterval=void 0)}async loadGoogleFonts(e){if(!this.fontsLoaded)try{let t=await this.processor.fetchGoogleFonts();e("Loaded ".concat(t.length," Google Fonts")),this.fontsLoaded=!0}catch(t){e("Google Fonts load error: ".concat(t instanceof Error?t.message:String(t)))}}async cancelProcessing(){this.stopMemoryMonitoring()}dispose(){this.stopMemoryMonitoring()}constructor(){this.isInitialized=!1,this.isInitializing=!1,this.fontsLoaded=!1,this.ffmpeg=new H.m,this.processor=new W(this.ffmpeg)}}let G=null;var X=s(2506),Q=s(4961);let Y={videoFile:null,subtitleFile:null,downloadUrl:null,videoInfo:null,parsedSubtitles:[],relevantSubtitles:[],subtitleStats:null,isProcessing:!1,isCancelling:!1,showCancelModal:!1,subtitleStyle:{fontSize:24,fontColor:"#FFFFFF",fontFamily:"Roboto",position:"bottom",alignment:"center",outlineColor:"#000000",outlineWidth:2,shadow:!0,opacity:1},processingOptions:{quality:"high",crf:18,memoryLimit:800,threads:0,useDiskCache:!0},outputFormat:"mp4",memoryUsage:0,error:null,ffmpegLoaded:!1,scriptLoaded:!1},$=(0,X.v)()((0,Q.lt)(e=>({...Y,setVideoFile:t=>e({videoFile:t},!1,"setVideoFile"),setSubtitleFile:t=>e({subtitleFile:t},!1,"setSubtitleFile"),setDownloadUrl:t=>e({downloadUrl:t},!1,"setDownloadUrl"),setVideoInfo:t=>e({videoInfo:t},!1,"setVideoInfo"),setParsedSubtitles:t=>e({parsedSubtitles:t},!1,"setParsedSubtitles"),setRelevantSubtitles:t=>e({relevantSubtitles:t},!1,"setRelevantSubtitles"),setSubtitleStats:t=>e({subtitleStats:t},!1,"setSubtitleStats"),setIsProcessing:t=>e({isProcessing:t},!1,"setIsProcessing"),setIsCancelling:t=>e({isCancelling:t},!1,"setIsCancelling"),setShowCancelModal:t=>e({showCancelModal:t},!1,"setShowCancelModal"),setSubtitleStyle:t=>e({subtitleStyle:t},!1,"setSubtitleStyle"),setProcessingOptions:t=>e({processingOptions:t},!1,"setProcessingOptions"),setOutputFormat:t=>e({outputFormat:t},!1,"setOutputFormat"),setMemoryUsage:t=>e({memoryUsage:t},!1,"setMemoryUsage"),setError:t=>e({error:t},!1,"setError"),setFfmpegLoaded:t=>e({ffmpegLoaded:t},!1,"setFfmpegLoaded"),setScriptLoaded:t=>e({scriptLoaded:t},!1,"setScriptLoaded"),resetAll:()=>e(Y,!1,"resetAll"),resetProcessingState:()=>e({isProcessing:!1,isCancelling:!1,showCancelModal:!1,error:null,downloadUrl:null},!1,"resetProcessingState")}),{name:"video-processing-store"})),J={progress:0,phase:"parsing-subtitles",phaseNumber:1,totalPhases:2,progressStage:"",progressPhase:"",progressETA:"",processedTime:void 0,totalDuration:void 0,currentSubtitle:void 0,totalSubtitles:void 0,logs:[],totalLogCount:0,isProcessing:!1,isComplete:!1,hasError:!1,memoryUsage:0,memoryLimit:500},K=(0,X.v)()((0,Q.lt)(e=>({...J,setProgress:t=>e({progress:t},!1,"setProgress"),setPhase:t=>e({phase:t},!1,"setPhase"),setPhaseNumber:t=>e({phaseNumber:t},!1,"setPhaseNumber"),setProgressStage:t=>e({progressStage:t},!1,"setProgressStage"),setProgressPhase:t=>e({progressPhase:t},!1,"setProgressPhase"),setProgressETA:t=>e({progressETA:t},!1,"setProgressETA"),setProgressMetadata:t=>e(e=>{var s,a,r,i;return{processedTime:null!=(s=t.processedTime)?s:e.processedTime,totalDuration:null!=(a=t.totalDuration)?a:e.totalDuration,currentSubtitle:null!=(r=t.currentSubtitle)?r:e.currentSubtitle,totalSubtitles:null!=(i=t.totalSubtitles)?i:e.totalSubtitles}},!1,"setProgressMetadata"),addLog:t=>e(e=>{let s=e.totalLogCount+1,a=[...e.logs,t];return{logs:a.length>10?a.slice(a.length-10):a,totalLogCount:s}},!1,"addLog"),clearLogs:()=>e({logs:[],totalLogCount:0},!1,"clearLogs"),setLogs:t=>e({logs:t,totalLogCount:t.length},!1,"setLogs"),setIsProcessing:t=>e({isProcessing:t},!1,"setIsProcessing"),setIsComplete:t=>e({isComplete:t},!1,"setIsComplete"),setHasError:t=>e({hasError:t},!1,"setHasError"),setMemoryUsage:t=>e({memoryUsage:t},!1,"setMemoryUsage"),setMemoryLimit:t=>e({memoryLimit:t},!1,"setMemoryLimit"),resetProgress:()=>e({progress:0,phase:"parsing-subtitles",phaseNumber:1,progressStage:"",progressPhase:"",progressETA:"",processedTime:void 0,totalDuration:void 0,currentSubtitle:void 0,totalSubtitles:void 0,isComplete:!1,hasError:!1},!1,"resetProgress"),resetAll:()=>e(J,!1,"resetAll"),updateProgress:t=>e(()=>{let e={progress:t.progress};return t.phase&&(e.phase=t.phase),t.phaseNumber&&(e.phaseNumber=t.phaseNumber),t.stage&&(e.progressStage=t.stage),t.phaseDisplay&&(e.progressPhase=t.phaseDisplay),t.eta&&(e.progressETA=t.eta),t.metadata&&(void 0!==t.metadata.processedTime&&(e.processedTime=t.metadata.processedTime),void 0!==t.metadata.totalDuration&&(e.totalDuration=t.metadata.totalDuration),void 0!==t.metadata.currentSubtitle&&(e.currentSubtitle=t.metadata.currentSubtitle),void 0!==t.metadata.totalSubtitles&&(e.totalSubtitles=t.metadata.totalSubtitles)),e},!1,"updateProgress")}),{name:"progress-store"})),ee="subtitle-burner-state";class et{static saveState(e){try{let t={...this.getState()||{},...e,savedAt:Date.now()};localStorage.setItem(ee,JSON.stringify(t)),console.log("✅ State saved to localStorage:",t)}catch(e){console.error("❌ Failed to save state:",e)}}static getAndClearState(){try{let e=localStorage.getItem(ee);if(!e)return null;let t=JSON.parse(e);if(Date.now()-t.savedAt>3e5)return this.clearState(),null;return this.clearState(),console.log("✅ State retrieved and cleared from localStorage:",t),t}catch(e){return console.error("❌ Failed to retrieve state:",e),this.clearState(),null}}static getState(){try{let e=localStorage.getItem(ee);if(!e)return null;let t=JSON.parse(e);if(Date.now()-t.savedAt>3e5)return this.clearState(),null;return t}catch(e){return console.error("❌ Failed to get state:",e),null}}static clearState(){try{localStorage.removeItem(ee),console.log("✅ State cleared from localStorage")}catch(e){console.error("❌ Failed to clear state:",e)}}static scrollToTabsSection(){requestAnimationFrame(()=>{let e=document.querySelector('[role="tablist"]')||document.querySelector(".tabs")||document.querySelector("[data-tabs]");e?e.scrollIntoView({behavior:"smooth",block:"start"}):window.scrollTo({top:200,behavior:"smooth"})})}static shouldRestoreState(){let e=this.getState();return(null==e?void 0:e.wasCancelled)===!0}static markCancellationInProgress(){let e=this.getState()||{};this.saveState({...e,wasCancelled:!0,wasProcessing:!0})}}let es=!1,ea=!1,er=null;var ei=s(8667),el=s.n(ei);function eo(){let{handleError:e}=function(){let e,t,s,a,l,o=(0,r.c)(6),[n,c]=i.useState(null);o[0]===Symbol.for("react.memo_cache_sentinel")?(e=()=>{c(null)},o[0]=e):e=o[0];let d=e;o[1]===Symbol.for("react.memo_cache_sentinel")?(t=e=>{console.error("Async Error:",e),c(e)},o[1]=t):t=o[1];let m=t;return o[2]!==n?(s=()=>{if(n)throw n},a=[n],o[2]=n,o[3]=s,o[4]=a):(s=o[3],a=o[4]),i.useEffect(s,a),o[5]===Symbol.for("react.memo_cache_sentinel")?(l={handleError:m,resetError:d},o[5]=l):l=o[5],l}(),t=$(),s=K(),a=(0,i.useRef)((G||(G=new Z),G));(0,i.useEffect)(()=>{if(et.shouldRestoreState()){let e=et.getAndClearState();e&&(s.clearLogs(),e.logs.forEach(e=>{s.addLog(e.message)}),t.setSubtitleStyle({fontSize:parseInt(e.fontSize),fontColor:e.fontColor,fontFamily:e.fontFamily}),t.setOutputFormat(e.outputFormat),(e.quality||e.crf||void 0!==e.threads||void 0!==e.useDiskCache)&&t.setProcessingOptions({quality:e.quality||"balanced",crf:e.crf||23,threads:e.threads||0,useDiskCache:void 0===e.useDiskCache||e.useDiskCache,memoryLimit:t.processingOptions.memoryLimit}),et.scrollToTabsSection(),s.addLog("\uD83D\uDED1 Processing cancelled successfully via page reload"),window.dispatchEvent(new CustomEvent("restoreActiveTab",{detail:e.activeTab})))}},[]),(0,i.useEffect)(()=>{(async()=>{if(!t.scriptLoaded)return;if(es){t.ffmpegLoaded||t.setFfmpegLoaded(!0);return}if(ea){let e=er;e&&(await e,t.ffmpegLoaded||t.setFfmpegLoaded(!0));return}ea=!0;let e=(async()=>{try{await a.current.initialize({onLog:e=>s.addLog(e),onProgress:e=>s.setProgress(e)}),es=!0,t.setFfmpegLoaded(!0),s.addLog("FFmpeg loaded successfully")}catch(a){let e=a instanceof Error?a.message:String(a);t.setError("Failed to load FFmpeg: ".concat(e)),s.addLog("FFmpeg load error: ".concat(e))}finally{ea=!1,er=null}})();er=e,await e})()},[t.scriptLoaded]),(0,i.useEffect)(()=>{let e=a.current,s=t.downloadUrl;return()=>{e.dispose(),s&&URL.revokeObjectURL(s)}},[t.downloadUrl]);let l=(0,i.useCallback)(async e=>{el()(async e=>{if(!e)return void t.setVideoFile(null);t.setVideoFile(e),t.setError(null);try{let r=await a.current.getVideoInfo(e);if(t.setVideoInfo(r),s.addLog("Video info: ".concat(r.width,"x").concat(r.height,", ").concat(r.duration.toFixed(2),"s")),t.parsedSubtitles.length>0){let{filteredSubtitles:e,stats:i}=a.current.filterSubtitlesByDuration(t.parsedSubtitles,r.duration);t.setRelevantSubtitles(e),t.setSubtitleStats(i),s.addLog("Subtitle optimization: ".concat(i.relevant,"/").concat(i.total," subtitles are relevant for ").concat(r.duration.toFixed(1),"s video (").concat(i.filtered," filtered out)"))}}catch(e){s.addLog("Could not get video info")}},300)(e)},[t.setVideoFile,t.setError,t.setVideoInfo,t.setRelevantSubtitles,t.setSubtitleStats,t.parsedSubtitles,s.addLog]),o=(0,i.useCallback)(async e=>{el()(async e=>{if(!e)return void t.setSubtitleFile(null);t.setSubtitleFile(e),t.setError(null);try{let r=await a.current.parseSubtitleFile(e);if(t.setParsedSubtitles(r),s.addLog("Parsed ".concat(r.length," subtitle entries from ").concat(e.name)),t.videoInfo){let{filteredSubtitles:e,stats:i}=a.current.filterSubtitlesByDuration(r,t.videoInfo.duration);t.setRelevantSubtitles(e),t.setSubtitleStats(i),s.addLog("Subtitle optimization: ".concat(i.relevant,"/").concat(i.total," subtitles are relevant for ").concat(t.videoInfo.duration.toFixed(1),"s video (").concat(i.filtered," filtered out)"))}else t.setRelevantSubtitles(r),t.setSubtitleStats({total:r.length,relevant:r.length,filtered:0,avgDuration:0,totalDuration:0})}catch(e){t.setError("Failed to parse subtitle file: ".concat(e instanceof Error?e.message:String(e)))}},300)(e)},[t.setSubtitleFile,t.setError,t.setParsedSubtitles,t.setRelevantSubtitles,t.setSubtitleStats,t.videoInfo,s.addLog]),n=(0,i.useCallback)(async()=>{if(!t.videoFile||!t.subtitleFile||0===t.relevantSubtitles.length||!t.videoInfo)return void t.setError("Please upload both video and subtitle files, and ensure video info is loaded.");t.setIsProcessing(!0),s.setProgress(0),s.setProgressStage(""),s.setProgressPhase(""),s.setProgressETA(""),t.setDownloadUrl(null),t.setError(null),t.setMemoryUsage(0),t.setIsCancelling(!1);try{await a.current.forceCleanup(),s.addLog("\uD83E\uDDF9 Previous session cleaned up")}catch(e){console.warn("Pre-processing cleanup error:",e)}try{var r;s.addLog("\uD83C\uDFA5 Starting video processing...");let e=await a.current.processVideo({videoFile:t.videoFile,relevantSubtitles:t.relevantSubtitles,videoInfo:t.videoInfo,outputFormat:t.outputFormat,subtitleStyle:t.subtitleStyle,processingOptions:t.processingOptions},{onLog:e=>{s.addLog(e)},onProgress:(e,t)=>{s.setProgress(e),"subtitle-generation"===t?s.setProgressPhase("Phase 1: Generating Subtitle Images"):"ffmpeg-setup"===t?s.setProgressPhase("Phase 2: FFmpeg Setup"):"filtergraph"===t?s.setProgressPhase("Phase 3: Building Filter Graph"):"video-processing"===t?s.setProgressPhase("Phase 4: Encoding Video with Subtitles"):s.setProgressPhase("Phase 1: Generating Subtitle Images"),s.setProgressStage("".concat(e.toFixed(1),"% complete"))},onMemoryUpdate:e=>{t.setMemoryUsage(e)}});t.setDownloadUrl(e),s.setProgress(100),s.setProgressStage("Completed"),s.setProgressPhase("Finished"),s.setProgressETA(""),s.addLog("✅ Video processing completed successfully!");try{await a.current.forceCleanup(t.relevantSubtitles),s.addLog("\uD83E\uDDF9 FFmpeg memory cleaned up")}catch(e){console.warn("Cleanup error after completion:",e)}(null==(r=t.subtitleStats)?void 0:r.filtered)&&s.addLog("Optimization saved significant processing time by filtering ".concat(t.subtitleStats.filtered," irrelevant subtitles"))}catch(a){if(a instanceof Error&&"called FFmpeg.terminate()"===a.message)s.addLog("\uD83D\uDED1 Processing cancelled by user"),s.setProgressStage("Cancelled"),s.setProgressPhase("Stopped");else{let r=a instanceof Error?a.message:String(a);t.setError("Processing failed: ".concat(r)),s.addLog("Processing error: ".concat(r)),s.setProgressStage("Error"),s.setProgressPhase("Failed"),e(a instanceof Error?a:Error(r))}}finally{t.setIsProcessing(!1),t.setIsCancelling(!1),setTimeout(()=>{s.setProgress(0),s.setProgressStage(""),s.setProgressPhase(""),s.setProgressETA(""),t.setMemoryUsage(0),(t.error||"Cancelled"===s.progressStage)&&t.setDownloadUrl(null)},2e3)}},[t.videoFile,t.subtitleFile,t.relevantSubtitles,t.videoInfo,t.outputFormat,t.subtitleStyle,t.processingOptions,t.subtitleStats,t.setError,t.setIsProcessing,t.setIsCancelling,t.setDownloadUrl,t.setMemoryUsage,s.setProgress,s.setProgressStage,s.setProgressPhase,s.setProgressETA,s.clearLogs,s.addLog,e]),c=(0,i.useCallback)(()=>{t.setShowCancelModal(!0)},[t.setShowCancelModal]),d=(0,i.useCallback)(async()=>{var e,a,r;t.setIsCancelling(!0),t.setShowCancelModal(!1),s.addLog("\uD83D\uDED1 Preparing to cancel processing...");let i=(null==(e=document.querySelector('[role="tablist"] [aria-selected="true"]'))?void 0:e.getAttribute("data-value"))||"quick";et.saveState({activeTab:"advanced"===i?"advanced":"quick",fontSize:t.subtitleStyle.fontSize.toString(),fontColor:t.subtitleStyle.fontColor,fontFamily:t.subtitleStyle.fontFamily,outputFormat:t.outputFormat,quality:t.processingOptions.quality,crf:t.processingOptions.crf,threads:t.processingOptions.threads,useDiskCache:t.processingOptions.useDiskCache,logs:s.logs.map(e=>({id:Math.random().toString(36),message:e,timestamp:Date.now(),type:"info"})),videoFileName:null==(a=t.videoFile)?void 0:a.name,subtitleFileName:null==(r=t.subtitleFile)?void 0:r.name,wasProcessing:!0,wasCancelled:!0}),s.addLog("\uD83D\uDCBE State saved - reloading page to cancel FFmpeg..."),et.markCancellationInProgress(),setTimeout(()=>{window.location.reload()},500)},[t.setIsCancelling,t.setShowCancelModal,t.subtitleStyle,t.outputFormat,t.processingOptions,t.videoFile,t.subtitleFile,s.addLog,s.logs]),m=(0,i.useCallback)(e=>{t.setSubtitleStyle({...t.subtitleStyle,...e})},[t.setSubtitleStyle,t.subtitleStyle]),u=(0,i.useCallback)(e=>{t.setProcessingOptions({...t.processingOptions,...e})},[t.setProcessingOptions,t.processingOptions]),h=(0,i.useCallback)(()=>{t.setError(null)},[t.setError]),g=(0,i.useCallback)(e=>{t.setScriptLoaded(e)},[t.setScriptLoaded]),p=(0,i.useCallback)(e=>{t.setError(e)},[t.setError]);return{videoFile:t.videoFile,subtitleFile:t.subtitleFile,isProcessing:t.isProcessing,isCancelling:t.isCancelling,showCancelModal:t.showCancelModal,progress:s.progress,progressStage:s.progressStage,progressPhase:s.progressPhase,progressETA:s.progressETA,downloadUrl:t.downloadUrl,error:t.error,videoInfo:t.videoInfo,parsedSubtitles:t.parsedSubtitles,relevantSubtitles:t.relevantSubtitles,subtitleStats:t.subtitleStats,subtitleStyle:t.subtitleStyle,processingOptions:t.processingOptions,outputFormat:t.outputFormat,ffmpegLoaded:t.ffmpegLoaded,scriptLoaded:t.scriptLoaded,memoryUsage:t.memoryUsage,logs:s.logs,totalLogCount:s.totalLogCount,setVideoFile:l,setSubtitleFile:o,startProcessing:n,cancelProcessing:c,confirmCancelProcessing:d,updateSubtitleStyle:m,updateProcessingOptions:u,clearLogs:s.clearLogs,addLog:s.addLog,clearError:h,setScriptLoaded:g,setError:p}}function en(){let e,t,s,i,l,o,n=(0,r.c)(15),{showCancelModal:c,isCancelling:d,confirmCancelProcessing:m}=eo(),{setShowCancelModal:u}=$();n[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,a.jsx)(T,{children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-10 h-10 bg-red-100 rounded-full flex items-center justify-center",children:(0,a.jsx)(O.A,{className:"w-5 h-5 text-red-600"})}),(0,a.jsx)("div",{children:(0,a.jsx)(z,{className:"text-lg font-semibold text-gray-900",children:"Cancel Processing?"})})]})}),t=(0,a.jsx)(I,{className:"text-gray-600 leading-relaxed",children:"Are you sure you want to cancel the current video processing operation? This action will stop the process immediately and any progress will be lost."}),n[0]=e,n[1]=t):(e=n[0],t=n[1]),n[2]!==d?(s=(0,a.jsx)(U,{className:"flex-1",disabled:d,children:"Continue Processing"}),n[2]=d,n[3]=s):s=n[3];let h=d?"Cancelling...":"Yes, Cancel";return n[4]!==m||n[5]!==d||n[6]!==h?(i=(0,a.jsx)(R,{onClick:m,className:"flex-1 bg-red-600 hover:bg-red-700 text-white",disabled:d,children:h}),n[4]=m,n[5]=d,n[6]=h,n[7]=i):i=n[7],n[8]!==s||n[9]!==i?(l=(0,a.jsxs)(E,{className:"sm:max-w-md",children:[e,t,(0,a.jsxs)(D,{className:"flex gap-3",children:[s,i]})]}),n[8]=s,n[9]=i,n[10]=l):l=n[10],n[11]!==u||n[12]!==c||n[13]!==l?(o=(0,a.jsx)(k,{open:c,onOpenChange:u,children:l}),n[11]=u,n[12]=c,n[13]=l,n[14]=o):o=n[14],o}var ec=s(819),ed=s(7747);function em(e){let t,s,i=(0,r.c)(4);return i[0]!==e?({...t}=e,i[0]=e,i[1]=t):t=i[1],i[2]!==t?(s=(0,a.jsx)(ec.bL,{"data-slot":"dialog",...t}),i[2]=t,i[3]=s):s=i[3],s}function eu(e){let t,s,i=(0,r.c)(4);return i[0]!==e?({...t}=e,i[0]=e,i[1]=t):t=i[1],i[2]!==t?(s=(0,a.jsx)(ec.l9,{"data-slot":"dialog-trigger",...t}),i[2]=t,i[3]=s):s=i[3],s}function eh(e){let t,s,i=(0,r.c)(4);return i[0]!==e?({...t}=e,i[0]=e,i[1]=t):t=i[1],i[2]!==t?(s=(0,a.jsx)(ec.ZL,{"data-slot":"dialog-portal",...t}),i[2]=t,i[3]=s):s=i[3],s}function eg(e){let t,s,i,l,o=(0,r.c)(8);return o[0]!==e?({className:t,...s}=e,o[0]=e,o[1]=t,o[2]=s):(t=o[1],s=o[2]),o[3]!==t?(i=(0,m.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",t),o[3]=t,o[4]=i):i=o[4],o[5]!==s||o[6]!==i?(l=(0,a.jsx)(ec.hJ,{"data-slot":"dialog-overlay",className:i,...s}),o[5]=s,o[6]=i,o[7]=l):l=o[7],l}function ep(e){let t,s,i,l,o,n,c,d,u=(0,r.c)(15);u[0]!==e?({className:s,children:t,showCloseButton:l,...i}=e,u[0]=e,u[1]=t,u[2]=s,u[3]=i,u[4]=l):(t=u[1],s=u[2],i=u[3],l=u[4]);let h=void 0===l||l;return u[5]===Symbol.for("react.memo_cache_sentinel")?(o=(0,a.jsx)(eg,{}),u[5]=o):o=u[5],u[6]!==s?(n=(0,m.cn)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",s),u[6]=s,u[7]=n):n=u[7],u[8]!==h?(c=h&&(0,a.jsxs)(ec.bm,{"data-slot":"dialog-close",className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[(0,a.jsx)(ed.A,{}),(0,a.jsx)("span",{className:"sr-only",children:"Close"})]}),u[8]=h,u[9]=c):c=u[9],u[10]!==t||u[11]!==i||u[12]!==n||u[13]!==c?(d=(0,a.jsxs)(eh,{"data-slot":"dialog-portal",children:[o,(0,a.jsxs)(ec.UC,{"data-slot":"dialog-content",className:n,...i,children:[t,c]})]}),u[10]=t,u[11]=i,u[12]=n,u[13]=c,u[14]=d):d=u[14],d}function ef(e){let t,s,i,l,o=(0,r.c)(8);return o[0]!==e?({className:t,...s}=e,o[0]=e,o[1]=t,o[2]=s):(t=o[1],s=o[2]),o[3]!==t?(i=(0,m.cn)("flex flex-col gap-2 text-center sm:text-left",t),o[3]=t,o[4]=i):i=o[4],o[5]!==s||o[6]!==i?(l=(0,a.jsx)("div",{"data-slot":"dialog-header",className:i,...s}),o[5]=s,o[6]=i,o[7]=l):l=o[7],l}function ex(e){let t,s,i,l,o=(0,r.c)(8);return o[0]!==e?({className:t,...s}=e,o[0]=e,o[1]=t,o[2]=s):(t=o[1],s=o[2]),o[3]!==t?(i=(0,m.cn)("text-lg leading-none font-semibold",t),o[3]=t,o[4]=i):i=o[4],o[5]!==s||o[6]!==i?(l=(0,a.jsx)(ec.hE,{"data-slot":"dialog-title",className:i,...s}),o[5]=s,o[6]=i,o[7]=l):l=o[7],l}let ev=(0,d.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function eb(e){let t,s,i,l,o,n=(0,r.c)(10);return n[0]!==e?({className:t,variant:i,...s}=e,n[0]=e,n[1]=t,n[2]=s,n[3]=i):(t=n[1],s=n[2],i=n[3]),n[4]!==t||n[5]!==i?(l=(0,m.cn)(ev({variant:i}),t),n[4]=t,n[5]=i,n[6]=l):l=n[6],n[7]!==s||n[8]!==l?(o=(0,a.jsx)("div",{className:l,...s}),n[7]=s,n[8]=l,n[9]=o):o=n[9],o}var ey=s(513);let ej=i.forwardRef((e,t)=>{let{className:s,children:r,...i}=e;return(0,a.jsxs)(ey.bL,{ref:t,className:(0,m.cn)("relative overflow-hidden",s),...i,children:[(0,a.jsx)(ey.LM,{className:"h-full w-full rounded-[inherit]",children:r}),(0,a.jsx)(ew,{}),(0,a.jsx)(ey.OK,{})]})});ej.displayName=ey.bL.displayName;let ew=i.forwardRef((e,t)=>{let{className:s,orientation:r="vertical",...i}=e;return(0,a.jsx)(ey.VM,{ref:t,orientation:r,className:(0,m.cn)("flex touch-none select-none transition-colors","vertical"===r&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===r&&"h-2.5 w-full border-t border-t-transparent p-[1px]",s),...i,children:(0,a.jsx)(ey.lr,{className:"relative flex-1 rounded-full bg-border"})})});ew.displayName=ey.VM.displayName;var eS=s(533),eN=s(8436),eF=s(8106),eP=s(2451),eC=s(8144),eL=s(9709);function e_(e){let t,s,l,o,n,c,d,u,h,g,p,f,b,y,j,w,S,N,F,P,C,L,_=(0,r.c)(59),{logs:k,isProcessing:M,trigger:A,onClearLogs:E,totalLogCount:T}=e,[D,z]=(0,i.useState)(!1),[I,R]=(0,i.useState)(!0),U=(0,i.useRef)(null),V=(0,i.useRef)(null);_[0]!==I?(t=()=>{I&&V.current&&V.current.scrollIntoView({behavior:"auto",block:"end"})},_[0]=I,_[1]=t):t=_[1],_[2]!==I||_[3]!==k?(s=[k,I],_[2]=I,_[3]=k,_[4]=s):s=_[4],(0,i.useEffect)(t,s),_[5]!==D?(l=()=>{if(D){let e=requestAnimationFrame(()=>{V.current&&V.current.scrollIntoView({behavior:"auto",block:"end"})});return()=>cancelAnimationFrame(e)}},o=[D],_[5]=D,_[6]=l,_[7]=o):(l=_[6],o=_[7]),(0,i.useEffect)(l,o),_[8]!==k.length?(n=e=>new Date(new Date().getTime()-(k.length-e-1)*2e3).toLocaleTimeString(),_[8]=k.length,_[9]=n):n=_[9];let B=n,q=k.length>0;_[10]!==q||_[11]!==M||_[12]!==k.length||_[13]!==T||_[14]!==A?(c=A||(0,a.jsxs)(x.$,{variant:"outline",size:"sm",className:"gap-2 bg-white/90 hover:bg-white shadow-sm",children:[(0,a.jsx)(eS.A,{className:"h-4 w-4"}),"Logs",(T||q)&&(0,a.jsx)(eb,{variant:"secondary",className:"ml-1",children:null!=T?T:k.length}),M&&(0,a.jsx)("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse ml-1"})]}),_[10]=q,_[11]=M,_[12]=k.length,_[13]=T,_[14]=A,_[15]=c):c=_[15],_[16]!==c?(d=(0,a.jsx)(eu,{asChild:!0,children:c}),_[16]=c,_[17]=d):d=_[17],_[18]===Symbol.for("react.memo_cache_sentinel")?(u=(0,a.jsx)(eS.A,{className:"h-5 w-5"}),_[18]=u):u=_[18],_[19]!==M?(h=M&&(0,a.jsxs)(eb,{variant:"default",className:"gap-1",children:[(0,a.jsx)("div",{className:"w-2 h-2 bg-white rounded-full animate-pulse"}),"Live"]}),_[19]=M,_[20]=h):h=_[20],_[21]!==h?(g=(0,a.jsx)(ef,{className:"flex-shrink-0",children:(0,a.jsxs)(ex,{className:"flex items-center gap-2",children:[u,"FFmpeg Processing Logs",h]})}),_[21]=h,_[22]=g):g=_[22],_[23]!==I?(p=()=>R(!I),_[23]=I,_[24]=p):p=_[24];let W=I&&"text-primary";_[25]!==W?(f=(0,m.cn)("gap-1",W),_[25]=W,_[26]=f):f=_[26],_[27]===Symbol.for("react.memo_cache_sentinel")?(b=(0,a.jsx)(eN.A,{className:"h-4 w-4"}),_[27]=b):b=_[27];let H=I?"ON":"OFF";_[28]!==p||_[29]!==f||_[30]!==H?(y=(0,a.jsx)("div",{className:"flex items-center gap-2",children:(0,a.jsxs)(x.$,{variant:"ghost",size:"sm",onClick:p,className:f,children:[b,"Auto-scroll: ",H]})}),_[28]=p,_[29]=f,_[30]=H,_[31]=y):y=_[31];let Z=!q;return _[32]===Symbol.for("react.memo_cache_sentinel")?(j=(0,a.jsx)(eF.A,{className:"h-4 w-4"}),_[32]=j):j=_[32],_[33]!==E||_[34]!==Z?(w=(0,a.jsx)("div",{className:"flex items-center gap-2",children:(0,a.jsxs)(x.$,{variant:"ghost",size:"sm",onClick:E,disabled:Z,className:"gap-1",children:[j,"Clear"]})}),_[33]=E,_[34]=Z,_[35]=w):w=_[35],_[36]!==y||_[37]!==w?(S=(0,a.jsxs)("div",{className:"flex items-center justify-between gap-2 mb-4 flex-shrink-0",children:[y,w]}),_[36]=y,_[37]=w,_[38]=S):S=_[38],_[39]!==B||_[40]!==q||_[41]!==k?(N=(0,a.jsx)(v.Zp,{className:"flex-1 min-h-0 overflow-hidden",children:(0,a.jsx)(v.Wu,{className:"p-0 h-full overflow-hidden",children:q?(0,a.jsx)(ej,{className:"h-[450px] p-4",ref:U,children:(0,a.jsxs)("div",{className:"space-y-2",children:[k.map((e,t)=>{let{icon:s,color:r,bg:i}=function(e){return e.includes("✅")||e.includes("completed")||e.includes("success")?{icon:eP.A,color:"text-green-600",bg:"bg-green-50"}:e.includes("❌")||e.includes("error")||e.includes("failed")?{icon:eC.A,color:"text-red-600",bg:"bg-red-50"}:e.includes("⚠️")||e.includes("warning")||e.includes("warn")?{icon:O.A,color:"text-yellow-600",bg:"bg-yellow-50"}:e.includes("\uD83C\uDFA5")||e.includes("\uD83D\uDDBC️")||e.includes("\uD83D\uDD04")?{icon:eN.A,color:"text-blue-600",bg:"bg-blue-50"}:{icon:eL.A,color:"text-gray-600",bg:"bg-gray-50"}}(e);return(0,a.jsxs)("div",{className:(0,m.cn)("flex items-start gap-3 p-3 rounded-lg border text-sm",i,"hover:shadow-sm transition-shadow"),children:[(0,a.jsx)(s,{className:(0,m.cn)("h-4 w-4 mt-0.5 flex-shrink-0",r)}),(0,a.jsx)("div",{className:"flex-1 min-w-0 overflow-hidden",children:(0,a.jsxs)("div",{className:"flex items-start justify-between gap-4",children:[(0,a.jsx)("span",{className:"text-gray-900 whitespace-nowrap overflow-hidden text-ellipsis",children:e}),(0,a.jsx)("span",{className:"text-xs text-gray-500 flex-shrink-0",children:B(t)})]})})]},t)}),(0,a.jsx)("div",{ref:V})]})}):(0,a.jsx)("div",{className:"flex items-center justify-center h-32 text-gray-500",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(eS.A,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),(0,a.jsx)("p",{className:"mb-2",children:"No logs yet."}),(0,a.jsx)("p",{className:"text-xs",children:"Upload a video and subtitle file, then start processing to see FFmpeg output here."})]})})})}),_[39]=B,_[40]=q,_[41]=k,_[42]=N):N=_[42],_[43]!==q||_[44]!==M||_[45]!==k.length||_[46]!==T?(F=(T||q)&&(0,a.jsxs)("div",{className:"flex items-center justify-between text-xs text-gray-500 mt-3 flex-shrink-0",children:[(0,a.jsxs)("span",{children:["Total: ",null!=T?T:k.length," log entries"]}),(0,a.jsx)("span",{children:M?"Updating live...":"Processing completed"})]}),_[43]=q,_[44]=M,_[45]=k.length,_[46]=T,_[47]=F):F=_[47],_[48]!==S||_[49]!==N||_[50]!==F?(P=(0,a.jsxs)("div",{className:"flex-1 flex flex-col min-h-0 overflow-hidden",children:[S,N,F]}),_[48]=S,_[49]=N,_[50]=F,_[51]=P):P=_[51],_[52]!==g||_[53]!==P?(C=(0,a.jsxs)(ep,{className:"max-w-7xl md:min-w-[80vw] max-h-[85vh] flex flex-col overflow-hidden",children:[g,P]}),_[52]=g,_[53]=P,_[54]=C):C=_[54],_[55]!==D||_[56]!==C||_[57]!==d?(L=(0,a.jsxs)(em,{open:D,onOpenChange:z,children:[d,C]}),_[55]=D,_[56]=C,_[57]=d,_[58]=L):L=_[58],L}var ek=s(6031);function eM(e){let t,s,i,l,o=(0,r.c)(8);return o[0]!==e?({className:t,...s}=e,o[0]=e,o[1]=t,o[2]=s):(t=o[1],s=o[2]),o[3]!==t?(i=(0,m.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",t),o[3]=t,o[4]=i):i=o[4],o[5]!==s||o[6]!==i?(l=(0,a.jsx)(ek.b,{"data-slot":"label",className:i,...s}),o[5]=s,o[6]=i,o[7]=l):l=o[7],l}function eA(e){let t,s,i,l,o,n=(0,r.c)(10);return n[0]!==e?({className:t,type:i,...s}=e,n[0]=e,n[1]=t,n[2]=s,n[3]=i):(t=n[1],s=n[2],i=n[3]),n[4]!==t?(l=(0,m.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",t),n[4]=t,n[5]=l):l=n[5],n[6]!==s||n[7]!==l||n[8]!==i?(o=(0,a.jsx)("input",{type:i,"data-slot":"input",className:l,...s}),n[6]=s,n[7]=l,n[8]=i,n[9]=o):o=n[9],o}var eE=s(4241),eT=s(4475),eD=s(8079),ez=s(9322);function eI(e){let t,s,i=(0,r.c)(4);return i[0]!==e?({...t}=e,i[0]=e,i[1]=t):t=i[1],i[2]!==t?(s=(0,a.jsx)(eE.bL,{"data-slot":"select",...t}),i[2]=t,i[3]=s):s=i[3],s}function eR(e){let t,s,i=(0,r.c)(4);return i[0]!==e?({...t}=e,i[0]=e,i[1]=t):t=i[1],i[2]!==t?(s=(0,a.jsx)(eE.WT,{"data-slot":"select-value",...t}),i[2]=t,i[3]=s):s=i[3],s}function eU(e){let t,s,i,l,o,n,c,d=(0,r.c)(13);d[0]!==e?({className:s,size:l,children:t,...i}=e,d[0]=e,d[1]=t,d[2]=s,d[3]=i,d[4]=l):(t=d[1],s=d[2],i=d[3],l=d[4]);let u=void 0===l?"default":l;return d[5]!==s?(o=(0,m.cn)("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",s),d[5]=s,d[6]=o):o=d[6],d[7]===Symbol.for("react.memo_cache_sentinel")?(n=(0,a.jsx)(eE.In,{asChild:!0,children:(0,a.jsx)(eT.A,{className:"size-4 opacity-50"})}),d[7]=n):n=d[7],d[8]!==t||d[9]!==i||d[10]!==u||d[11]!==o?(c=(0,a.jsxs)(eE.l9,{"data-slot":"select-trigger","data-size":u,className:o,...i,children:[t,n]}),d[8]=t,d[9]=i,d[10]=u,d[11]=o,d[12]=c):c=d[12],c}function eO(e){let t,s,i,l,o,n,c,d,u,h,g=(0,r.c)(20);g[0]!==e?({className:s,children:t,position:l,...i}=e,g[0]=e,g[1]=t,g[2]=s,g[3]=i,g[4]=l):(t=g[1],s=g[2],i=g[3],l=g[4]);let p=void 0===l?"popper":l,f="popper"===p&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1";g[5]!==s||g[6]!==f?(o=(0,m.cn)("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md",f,s),g[5]=s,g[6]=f,g[7]=o):o=g[7],g[8]===Symbol.for("react.memo_cache_sentinel")?(n=(0,a.jsx)(eB,{}),g[8]=n):n=g[8];let x="popper"===p&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1";return g[9]!==x?(c=(0,m.cn)("p-1",x),g[9]=x,g[10]=c):c=g[10],g[11]!==t||g[12]!==c?(d=(0,a.jsx)(eE.LM,{className:c,children:t}),g[11]=t,g[12]=c,g[13]=d):d=g[13],g[14]===Symbol.for("react.memo_cache_sentinel")?(u=(0,a.jsx)(eq,{}),g[14]=u):u=g[14],g[15]!==p||g[16]!==i||g[17]!==o||g[18]!==d?(h=(0,a.jsx)(eE.ZL,{children:(0,a.jsxs)(eE.UC,{"data-slot":"select-content",className:o,position:p,...i,children:[n,d,u]})}),g[15]=p,g[16]=i,g[17]=o,g[18]=d,g[19]=h):h=g[19],h}function eV(e){let t,s,i,l,o,n,c,d=(0,r.c)(13);return d[0]!==e?({className:s,children:t,...i}=e,d[0]=e,d[1]=t,d[2]=s,d[3]=i):(t=d[1],s=d[2],i=d[3]),d[4]!==s?(l=(0,m.cn)("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",s),d[4]=s,d[5]=l):l=d[5],d[6]===Symbol.for("react.memo_cache_sentinel")?(o=(0,a.jsx)("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:(0,a.jsx)(eE.VF,{children:(0,a.jsx)(eD.A,{className:"size-4"})})}),d[6]=o):o=d[6],d[7]!==t?(n=(0,a.jsx)(eE.p4,{children:t}),d[7]=t,d[8]=n):n=d[8],d[9]!==i||d[10]!==l||d[11]!==n?(c=(0,a.jsxs)(eE.q7,{"data-slot":"select-item",className:l,...i,children:[o,n]}),d[9]=i,d[10]=l,d[11]=n,d[12]=c):c=d[12],c}function eB(e){let t,s,i,l,o,n=(0,r.c)(9);return n[0]!==e?({className:t,...s}=e,n[0]=e,n[1]=t,n[2]=s):(t=n[1],s=n[2]),n[3]!==t?(i=(0,m.cn)("flex cursor-default items-center justify-center py-1",t),n[3]=t,n[4]=i):i=n[4],n[5]===Symbol.for("react.memo_cache_sentinel")?(l=(0,a.jsx)(ez.A,{className:"size-4"}),n[5]=l):l=n[5],n[6]!==s||n[7]!==i?(o=(0,a.jsx)(eE.PP,{"data-slot":"select-scroll-up-button",className:i,...s,children:l}),n[6]=s,n[7]=i,n[8]=o):o=n[8],o}function eq(e){let t,s,i,l,o,n=(0,r.c)(9);return n[0]!==e?({className:t,...s}=e,n[0]=e,n[1]=t,n[2]=s):(t=n[1],s=n[2]),n[3]!==t?(i=(0,m.cn)("flex cursor-default items-center justify-center py-1",t),n[3]=t,n[4]=i):i=n[4],n[5]===Symbol.for("react.memo_cache_sentinel")?(l=(0,a.jsx)(eT.A,{className:"size-4"}),n[5]=l):l=n[5],n[6]!==s||n[7]!==i?(o=(0,a.jsx)(eE.wn,{"data-slot":"select-scroll-down-button",className:i,...s,children:l}),n[6]=s,n[7]=i,n[8]=o):o=n[8],o}var eW=s(6105);let eH=i.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsxs)(eW.bL,{ref:t,className:(0,m.cn)("relative flex w-full touch-none select-none items-center",s),...r,children:[(0,a.jsx)(eW.CC,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:(0,a.jsx)(eW.Q6,{className:"absolute h-full bg-primary"})}),(0,a.jsx)(eW.zi,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]})});eH.displayName=eW.bL.displayName;var eZ=s(4139);let eG=eZ.bL,eX=i.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(eZ.B8,{ref:t,className:(0,m.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",s),...r})});eX.displayName=eZ.B8.displayName;let eQ=i.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(eZ.l9,{ref:t,className:(0,m.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",s),...r})});eQ.displayName=eZ.l9.displayName;let eY=i.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(eZ.UC,{ref:t,className:(0,m.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",s),...r})});function e$(e){let t,s,i,l,o,n,c,d,m,u,h,g,p,f,x,b,y,j,w,S,N,F,P,C,L,_,k,M,A,E,T,D,z,I,R,U,O,V,B,q,W,H,Z,G,X,Q,Y,$,J,K,ee,et,es,ea,er,ei,el,eo,en,ec,ed,em,eu,eh,eg,ep,ef,ex,ev,eb,ey,ej,ew,eS,eN,eF,eP,eC,eL,e_,ek,eE,eT,eD,ez,eB,eq=(0,r.c)(185),{style:eW,onStyleChange:eZ,processingOptions:e$,onProcessingOptionsChange:eJ}=e;eq[0]!==eZ||eq[1]!==eW?(t=e=>{eZ({...eW,...e})},eq[0]=eZ,eq[1]=eW,eq[2]=t):t=eq[2];let eK=t;eq[3]!==eJ||eq[4]!==e$?(s=e=>{eJ({...e$,...e})},eq[3]=eJ,eq[4]=e$,eq[5]=s):s=eq[5];let e0=s;eq[6]===Symbol.for("react.memo_cache_sentinel")?(i=(0,a.jsx)(v.aR,{children:(0,a.jsx)(v.ZB,{children:"Advanced Settings"})}),eq[6]=i):i=eq[6],eq[7]===Symbol.for("react.memo_cache_sentinel")?(l=(0,a.jsxs)(eX,{className:"grid w-full grid-cols-3 mb-6",children:[(0,a.jsx)(eQ,{value:"styling",children:"Styling"}),(0,a.jsx)(eQ,{value:"positioning",children:"Positioning"}),(0,a.jsx)(eQ,{value:"processing",children:"Processing"})]}),eq[7]=l):l=eq[7],eq[8]===Symbol.for("react.memo_cache_sentinel")?(o=(0,a.jsx)(eM,{children:"Font Size"}),eq[8]=o):o=eq[8],eq[9]!==eW.fontSize?(n=[eW.fontSize],eq[9]=eW.fontSize,eq[10]=n):n=eq[10],eq[11]!==eK?(c=e=>{let[t]=e;return eK({fontSize:t})},eq[11]=eK,eq[12]=c):c=eq[12],eq[13]!==n||eq[14]!==c?(d=(0,a.jsx)(eH,{value:n,onValueChange:c,min:12,max:72,step:1,className:"w-full"}),eq[13]=n,eq[14]=c,eq[15]=d):d=eq[15],eq[16]!==eW.fontSize?(m=(0,a.jsxs)("span",{className:"text-sm text-muted-foreground",children:[eW.fontSize,"px"]}),eq[16]=eW.fontSize,eq[17]=m):m=eq[17],eq[18]!==d||eq[19]!==m?(u=(0,a.jsxs)("div",{className:"space-y-2",children:[o,d,m]}),eq[18]=d,eq[19]=m,eq[20]=u):u=eq[20],eq[21]===Symbol.for("react.memo_cache_sentinel")?(h=(0,a.jsx)(eM,{children:"Opacity"}),eq[21]=h):h=eq[21];let e1=eW.opacity||1;eq[22]!==e1?(g=[e1],eq[22]=e1,eq[23]=g):g=eq[23],eq[24]!==eK?(p=e=>{let[t]=e;return eK({opacity:t})},eq[24]=eK,eq[25]=p):p=eq[25],eq[26]!==g||eq[27]!==p?(f=(0,a.jsx)(eH,{value:g,onValueChange:p,min:0,max:1,step:.1,className:"w-full"}),eq[26]=g,eq[27]=p,eq[28]=f):f=eq[28],eq[29]!==eW.opacity?(x=Math.round(100*(eW.opacity||1)),eq[29]=eW.opacity,eq[30]=x):x=eq[30],eq[31]!==x?(b=(0,a.jsxs)("span",{className:"text-sm text-muted-foreground",children:[x,"%"]}),eq[31]=x,eq[32]=b):b=eq[32],eq[33]!==f||eq[34]!==b?(y=(0,a.jsxs)("div",{className:"space-y-2",children:[h,f,b]}),eq[33]=f,eq[34]=b,eq[35]=y):y=eq[35],eq[36]!==u||eq[37]!==y?(j=(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[u,y]}),eq[36]=u,eq[37]=y,eq[38]=j):j=eq[38],eq[39]===Symbol.for("react.memo_cache_sentinel")?(w=(0,a.jsx)(eM,{children:"Text Color"}),eq[39]=w):w=eq[39],eq[40]!==eK?(S=e=>eK({fontColor:e.target.value}),eq[40]=eK,eq[41]=S):S=eq[41],eq[42]!==eW.fontColor||eq[43]!==S?(N=(0,a.jsxs)("div",{className:"space-y-2",children:[w,(0,a.jsx)(eA,{type:"color",value:eW.fontColor,onChange:S,className:"h-10"})]}),eq[42]=eW.fontColor,eq[43]=S,eq[44]=N):N=eq[44],eq[45]===Symbol.for("react.memo_cache_sentinel")?(F=(0,a.jsx)(eM,{children:"Background Color"}),eq[45]=F):F=eq[45];let e2=eW.backgroundColor||"#000000";eq[46]!==eK?(P=e=>eK({backgroundColor:e.target.value}),eq[46]=eK,eq[47]=P):P=eq[47],eq[48]!==e2||eq[49]!==P?(C=(0,a.jsxs)("div",{className:"space-y-2",children:[F,(0,a.jsx)(eA,{type:"color",value:e2,onChange:P,className:"h-10"})]}),eq[48]=e2,eq[49]=P,eq[50]=C):C=eq[50],eq[51]!==N||eq[52]!==C?(L=(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[N,C]}),eq[51]=N,eq[52]=C,eq[53]=L):L=eq[53],eq[54]===Symbol.for("react.memo_cache_sentinel")?(_=(0,a.jsx)(eM,{children:"Outline Color"}),eq[54]=_):_=eq[54];let e3=eW.outlineColor||"#000000";eq[55]!==eK?(k=e=>eK({outlineColor:e.target.value}),eq[55]=eK,eq[56]=k):k=eq[56],eq[57]!==e3||eq[58]!==k?(M=(0,a.jsxs)("div",{className:"space-y-2",children:[_,(0,a.jsx)(eA,{type:"color",value:e3,onChange:k,className:"h-10"})]}),eq[57]=e3,eq[58]=k,eq[59]=M):M=eq[59],eq[60]===Symbol.for("react.memo_cache_sentinel")?(A=(0,a.jsx)(eM,{children:"Outline Width"}),eq[60]=A):A=eq[60];let e4=eW.outlineWidth||0;eq[61]!==e4?(E=[e4],eq[61]=e4,eq[62]=E):E=eq[62],eq[63]!==eK?(T=e=>{let[t]=e;return eK({outlineWidth:t})},eq[63]=eK,eq[64]=T):T=eq[64],eq[65]!==E||eq[66]!==T?(D=(0,a.jsx)(eH,{value:E,onValueChange:T,min:0,max:5,step:.5,className:"w-full"}),eq[65]=E,eq[66]=T,eq[67]=D):D=eq[67];let e5=eW.outlineWidth||0;eq[68]!==e5?(z=(0,a.jsxs)("span",{className:"text-sm text-muted-foreground",children:[e5,"px"]}),eq[68]=e5,eq[69]=z):z=eq[69],eq[70]!==D||eq[71]!==z?(I=(0,a.jsxs)("div",{className:"space-y-2",children:[A,D,z]}),eq[70]=D,eq[71]=z,eq[72]=I):I=eq[72],eq[73]!==M||eq[74]!==I?(R=(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[M,I]}),eq[73]=M,eq[74]=I,eq[75]=R):R=eq[75],eq[76]!==j||eq[77]!==L||eq[78]!==R?(U=(0,a.jsxs)(eY,{value:"styling",className:"space-y-4",children:[j,L,R]}),eq[76]=j,eq[77]=L,eq[78]=R,eq[79]=U):U=eq[79],eq[80]===Symbol.for("react.memo_cache_sentinel")?(O=(0,a.jsx)(eM,{children:"Position"}),eq[80]=O):O=eq[80];let e6=eW.position||"bottom";eq[81]!==eK?(V=e=>eK({position:e}),eq[81]=eK,eq[82]=V):V=eq[82],eq[83]===Symbol.for("react.memo_cache_sentinel")?(B=(0,a.jsx)(eU,{className:"w-full",children:(0,a.jsx)(eR,{})}),eq[83]=B):B=eq[83],eq[84]===Symbol.for("react.memo_cache_sentinel")?(q=(0,a.jsxs)(eO,{children:[(0,a.jsx)(eV,{value:"bottom",children:"Bottom"}),(0,a.jsx)(eV,{value:"top",children:"Top"}),(0,a.jsx)(eV,{value:"center",children:"Center"}),(0,a.jsx)(eV,{value:"custom",children:"Custom"})]}),eq[84]=q):q=eq[84],eq[85]!==e6||eq[86]!==V?(W=(0,a.jsxs)("div",{className:"space-y-2",children:[O,(0,a.jsxs)(eI,{value:e6,onValueChange:V,children:[B,q]})]}),eq[85]=e6,eq[86]=V,eq[87]=W):W=eq[87],eq[88]===Symbol.for("react.memo_cache_sentinel")?(H=(0,a.jsx)(eM,{children:"Alignment"}),eq[88]=H):H=eq[88];let e8=eW.alignment||"center";eq[89]!==eK?(Z=e=>eK({alignment:e}),eq[89]=eK,eq[90]=Z):Z=eq[90],eq[91]===Symbol.for("react.memo_cache_sentinel")?(G=(0,a.jsx)(eU,{className:"w-full",children:(0,a.jsx)(eR,{})}),eq[91]=G):G=eq[91],eq[92]===Symbol.for("react.memo_cache_sentinel")?(X=(0,a.jsxs)(eO,{children:[(0,a.jsx)(eV,{value:"left",children:"Left"}),(0,a.jsx)(eV,{value:"center",children:"Center"}),(0,a.jsx)(eV,{value:"right",children:"Right"})]}),eq[92]=X):X=eq[92],eq[93]!==e8||eq[94]!==Z?(Q=(0,a.jsxs)("div",{className:"space-y-2",children:[H,(0,a.jsxs)(eI,{value:e8,onValueChange:Z,children:[G,X]})]}),eq[93]=e8,eq[94]=Z,eq[95]=Q):Q=eq[95],eq[96]!==W||eq[97]!==Q?(Y=(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[W,Q]}),eq[96]=W,eq[97]=Q,eq[98]=Y):Y=eq[98],eq[99]===Symbol.for("react.memo_cache_sentinel")?($=(0,a.jsx)(eM,{children:"Margin X"}),eq[99]=$):$=eq[99];let e7=eW.marginX||0;eq[100]!==e7?(J=[e7],eq[100]=e7,eq[101]=J):J=eq[101],eq[102]!==eK?(K=e=>{let[t]=e;return eK({marginX:t})},eq[102]=eK,eq[103]=K):K=eq[103],eq[104]!==J||eq[105]!==K?(ee=(0,a.jsx)(eH,{value:J,onValueChange:K,min:-100,max:100,step:5,className:"w-full"}),eq[104]=J,eq[105]=K,eq[106]=ee):ee=eq[106];let e9=eW.marginX||0;eq[107]!==e9?(et=(0,a.jsxs)("span",{className:"text-sm text-muted-foreground",children:[e9,"px"]}),eq[107]=e9,eq[108]=et):et=eq[108],eq[109]!==ee||eq[110]!==et?(es=(0,a.jsxs)("div",{className:"space-y-2",children:[$,ee,et]}),eq[109]=ee,eq[110]=et,eq[111]=es):es=eq[111],eq[112]===Symbol.for("react.memo_cache_sentinel")?(ea=(0,a.jsx)(eM,{children:"Margin Y"}),eq[112]=ea):ea=eq[112];let te=eW.marginY||0;eq[113]!==te?(er=[te],eq[113]=te,eq[114]=er):er=eq[114],eq[115]!==eK?(ei=e=>{let[t]=e;return eK({marginY:t})},eq[115]=eK,eq[116]=ei):ei=eq[116],eq[117]!==er||eq[118]!==ei?(el=(0,a.jsx)(eH,{value:er,onValueChange:ei,min:-100,max:100,step:5,className:"w-full"}),eq[117]=er,eq[118]=ei,eq[119]=el):el=eq[119];let tt=eW.marginY||0;eq[120]!==tt?(eo=(0,a.jsxs)("span",{className:"text-sm text-muted-foreground",children:[tt,"px"]}),eq[120]=tt,eq[121]=eo):eo=eq[121],eq[122]!==el||eq[123]!==eo?(en=(0,a.jsxs)("div",{className:"space-y-2",children:[ea,el,eo]}),eq[122]=el,eq[123]=eo,eq[124]=en):en=eq[124],eq[125]!==es||eq[126]!==en?(ec=(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[es,en]}),eq[125]=es,eq[126]=en,eq[127]=ec):ec=eq[127],eq[128]!==Y||eq[129]!==ec?(ed=(0,a.jsxs)(eY,{value:"positioning",className:"space-y-4",children:[Y,ec]}),eq[128]=Y,eq[129]=ec,eq[130]=ed):ed=eq[130],eq[131]===Symbol.for("react.memo_cache_sentinel")?(em=(0,a.jsx)(eM,{children:"Quality"}),eq[131]=em):em=eq[131],eq[132]!==e0?(eu=e=>e0({quality:e}),eq[132]=e0,eq[133]=eu):eu=eq[133],eq[134]===Symbol.for("react.memo_cache_sentinel")?(eh=(0,a.jsx)(eU,{className:"w-full",children:(0,a.jsx)(eR,{})}),eq[134]=eh):eh=eq[134],eq[135]===Symbol.for("react.memo_cache_sentinel")?(eg=(0,a.jsxs)(eO,{children:[(0,a.jsx)(eV,{value:"fast",children:"Fast (Lower Quality)"}),(0,a.jsx)(eV,{value:"balanced",children:"Balanced"}),(0,a.jsx)(eV,{value:"high",children:"High Quality"})]}),eq[135]=eg):eg=eq[135],eq[136]!==e$.quality||eq[137]!==eu?(ep=(0,a.jsxs)("div",{className:"space-y-2",children:[em,(0,a.jsxs)(eI,{value:e$.quality,onValueChange:eu,children:[eh,eg]})]}),eq[136]=e$.quality,eq[137]=eu,eq[138]=ep):ep=eq[138],eq[139]===Symbol.for("react.memo_cache_sentinel")?(ef=(0,a.jsx)(eM,{children:"CPU Threads"}),eq[139]=ef):ef=eq[139];let ts=0===e$.threads||null==e$.threads?"auto":String(e$.threads);eq[140]!==e0?(ex=e=>e0({threads:"auto"===e?0:parseInt(e)}),eq[140]=e0,eq[141]=ex):ex=eq[141],eq[142]===Symbol.for("react.memo_cache_sentinel")?(ev=(0,a.jsx)(eU,{className:"w-full",children:(0,a.jsx)(eR,{})}),eq[142]=ev):ev=eq[142],eq[143]===Symbol.for("react.memo_cache_sentinel")?(eb=(0,a.jsxs)(eO,{children:[(0,a.jsx)(eV,{value:"auto",children:"Auto (All Available)"}),(0,a.jsx)(eV,{value:"1",children:"1 Thread"}),(0,a.jsx)(eV,{value:"2",children:"2 Threads"}),(0,a.jsx)(eV,{value:"4",children:"4 Threads"}),(0,a.jsx)(eV,{value:"8",children:"8 Threads"})]}),eq[143]=eb):eb=eq[143],eq[144]!==ts||eq[145]!==ex?(ey=(0,a.jsxs)("div",{className:"space-y-2",children:[ef,(0,a.jsxs)(eI,{value:ts,onValueChange:ex,children:[ev,eb]})]}),eq[144]=ts,eq[145]=ex,eq[146]=ey):ey=eq[146],eq[147]!==ep||eq[148]!==ey?(ej=(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[ep,ey]}),eq[147]=ep,eq[148]=ey,eq[149]=ej):ej=eq[149],eq[150]===Symbol.for("react.memo_cache_sentinel")?(ew=(0,a.jsx)(eM,{children:"Compression (CRF)"}),eq[150]=ew):ew=eq[150];let ta=e$.crf||23;eq[151]!==ta?(eS=[ta],eq[151]=ta,eq[152]=eS):eS=eq[152],eq[153]!==e0?(eN=e=>{let[t]=e;return e0({crf:t})},eq[153]=e0,eq[154]=eN):eN=eq[154],eq[155]!==eS||eq[156]!==eN?(eF=(0,a.jsx)(eH,{value:eS,onValueChange:eN,min:18,max:32,step:1,className:"w-full"}),eq[155]=eS,eq[156]=eN,eq[157]=eF):eF=eq[157];let tr=e$.crf||23,ti=20>(e$.crf||23)?"High Quality":26>(e$.crf||23)?"Balanced":"Fast";eq[158]!==tr||eq[159]!==ti?(eP=(0,a.jsxs)("span",{className:"text-sm text-muted-foreground",children:["CRF ",tr," (",ti,")"]}),eq[158]=tr,eq[159]=ti,eq[160]=eP):eP=eq[160],eq[161]!==eF||eq[162]!==eP?(eC=(0,a.jsxs)("div",{className:"space-y-2",children:[ew,eF,eP]}),eq[161]=eF,eq[162]=eP,eq[163]=eC):eC=eq[163],eq[164]===Symbol.for("react.memo_cache_sentinel")?(eL=(0,a.jsx)(eM,{children:"Memory Limit (MB)"}),eq[164]=eL):eL=eq[164];let tl=e$.memoryLimit||500;eq[165]!==tl?(e_=[tl],eq[165]=tl,eq[166]=e_):e_=eq[166],eq[167]!==e0?(ek=e=>{let[t]=e;return e0({memoryLimit:t})},eq[167]=e0,eq[168]=ek):ek=eq[168],eq[169]!==e_||eq[170]!==ek?(eE=(0,a.jsx)(eH,{value:e_,onValueChange:ek,min:200,max:2e3,step:50,className:"w-full"}),eq[169]=e_,eq[170]=ek,eq[171]=eE):eE=eq[171];let to=e$.memoryLimit||500;return eq[172]!==to?(eT=(0,a.jsxs)("span",{className:"text-sm text-muted-foreground",children:[to,"MB limit"]}),eq[172]=to,eq[173]=eT):eT=eq[173],eq[174]!==eT||eq[175]!==eE?(eD=(0,a.jsxs)("div",{className:"space-y-2",children:[eL,eE,eT]}),eq[174]=eT,eq[175]=eE,eq[176]=eD):eD=eq[176],eq[177]!==eD||eq[178]!==ej||eq[179]!==eC?(ez=(0,a.jsxs)(eY,{value:"processing",className:"space-y-4",children:[ej,eC,eD]}),eq[177]=eD,eq[178]=ej,eq[179]=eC,eq[180]=ez):ez=eq[180],eq[181]!==ez||eq[182]!==U||eq[183]!==ed?(eB=(0,a.jsxs)(v.Zp,{children:[i,(0,a.jsx)(v.Wu,{children:(0,a.jsxs)(eG,{defaultValue:"styling",className:"w-full",children:[l,U,ed,ez]})})]}),eq[181]=ez,eq[182]=U,eq[183]=ed,eq[184]=eB):eB=eq[184],eB}eY.displayName=eZ.UC.displayName;var eJ=s(1457);let eK=e=>{let t,s,l,o,n,c,d,m,u,h,g,p,f,x,b,y,j,w,S,N,F,P,C,L,_,k,M,A,E,T,D,z,I,R,U=(0,r.c)(102),{style:O,className:V}=e,B=void 0===V?"":V,[q,W]=(0,i.useState)("This is how the subtitle will look like"),H=(0,i.useRef)(null),{videoInfo:Z}=eo();U[0]===Symbol.for("react.memo_cache_sentinel")?(t={containerWidth:0,containerHeight:0,scale:.5},U[0]=t):t=U[0];let[G,X]=(0,i.useState)(t);U[1]!==(null==Z?void 0:Z.height)||U[2]!==(null==Z?void 0:Z.width)?(s=()=>{let e=()=>{let e=H.current;if(!e)return;let t=e.clientWidth||0,s=e.clientHeight||0,a=(null==Z?void 0:Z.width)||1920,r=(null==Z?void 0:Z.height)||1080;if(a>0&&r>0&&t>0&&s>0){let e=Math.min(t/a,s/r);X({containerWidth:t,containerHeight:s,scale:e})}};e(),window.addEventListener("resize",e);let t=setTimeout(e,100);return()=>{window.removeEventListener("resize",e),clearTimeout(t)}},U[1]=null==Z?void 0:Z.height,U[2]=null==Z?void 0:Z.width,U[3]=s):s=U[3];let Q=null==Z?void 0:Z.width,Y=null==Z?void 0:Z.height;U[4]!==Q||U[5]!==Y?(l=[Q,Y],U[4]=Q,U[5]=Y,U[6]=l):l=U[6],(0,i.useEffect)(s,l),U[7]!==G.scale||U[8]!==O.alignment||U[9]!==O.marginX||U[10]!==O.marginY||U[11]!==O.position?(o=()=>{let e,t,s;"left"===O.alignment?(e="left",t="5%",s="none"):"right"===O.alignment?(e="right",t="95%",s="translateX(-100%)"):(e="center",t="50%",s="translateX(-50%)");let a={position:"absolute",left:t,transform:s,width:"90%",textAlign:e,wordWrap:"break-word",maxWidth:"90%"};if(O.marginX){let e=O.marginX*G.scale;"left"===O.alignment?a.left="calc(5% + ".concat(e,"px)"):"right"===O.alignment?a.left="calc(95% - ".concat(e,"px)"):a.left="calc(50% + ".concat(e,"px)")}let r=50*G.scale,i=(O.marginY||0)*G.scale;switch(O.position){case"top":a.top="".concat(r+i,"px");break;case"center":{a.top="50%";let e="left"===O.alignment?"0":"right"===O.alignment?"-100%":"-50%";a.transform="translate(".concat(e,", ").concat(i?"calc(-50% + ".concat(i,"px)"):"-50%",")");break}default:a.bottom="".concat(r+Math.abs(i),"px")}return a},U[7]=G.scale,U[8]=O.alignment,U[9]=O.marginX,U[10]=O.marginY,U[11]=O.position,U[12]=o):o=U[12];let $=o;U[13]!==G.scale||U[14]!==O.outlineColor||U[15]!==O.outlineWidth||U[16]!==O.shadow?(n=()=>{let e=O.outlineWidth||0,t=O.outlineColor||"#000000";if(0===e)return O.shadow?"2px 2px 4px rgba(0,0,0,0.8)":"none";let s=e*G.scale,a=[];for(let e=0;e<8;e++){let r=e*Math.PI/4,i=Math.cos(r)*s,l=Math.sin(r)*s;a.push("".concat(i,"px ").concat(l,"px 0px ").concat(t))}return O.shadow&&a.push("".concat(2*G.scale,"px ").concat(2*G.scale,"px ").concat(4*G.scale,"px rgba(0,0,0,0.8)")),a.join(", ")},U[13]=G.scale,U[14]=O.outlineColor,U[15]=O.outlineWidth,U[16]=O.shadow,U[17]=n):n=U[17];let J=n;U[18]!==G.scale||U[19]!==O.fontSize?(c=()=>(O.fontSize||24)*G.scale,U[18]=G.scale,U[19]=O.fontSize,U[20]=c):c=U[20];let K=c;U[21]!==G.scale||U[22]!==O.backgroundColor?(d=()=>{if(!O.backgroundColor||"transparent"===O.backgroundColor)return"0";let e=8*G.scale,t=12*G.scale;return"".concat(e,"px ").concat(t,"px")},U[21]=G.scale,U[22]=O.backgroundColor,U[23]=d):d=U[23];let ee=d,et="".concat(K(),"px"),es=O.fontColor||"#FFFFFF",ea="'".concat(O.fontFamily||"Arial","', sans-serif"),er=J(),ei=O.opacity||1,el=O.backgroundColor||"transparent",en=ee(),ec=O.backgroundColor&&"transparent"!==O.backgroundColor?"".concat(4*G.scale,"px"):"0";U[24]!==$?(m=$(),U[24]=$,U[25]=m):m=U[25],U[26]!==et||U[27]!==es||U[28]!==ea||U[29]!==er||U[30]!==ei||U[31]!==el||U[32]!==en||U[33]!==ec||U[34]!==m?(u={fontSize:et,color:es,fontFamily:ea,fontWeight:"bold",lineHeight:"1.4",textShadow:er,opacity:ei,backgroundColor:el,padding:en,borderRadius:ec,display:"inline-block",...m},U[26]=et,U[27]=es,U[28]=ea,U[29]=er,U[30]=ei,U[31]=el,U[32]=en,U[33]=ec,U[34]=m,U[35]=u):u=U[35];let ed=u;U[36]!==G.containerHeight||U[37]!==G.containerWidth||U[38]!==G.scale||U[39]!==K||U[40]!==O.fontSize||U[41]!==(null==Z?void 0:Z.height)||U[42]!==(null==Z?void 0:Z.width)?(h=()=>{let e=(null==Z?void 0:Z.width)||1920,t=(null==Z?void 0:Z.height)||1080,s=O.fontSize||24,a=K();return{videoDimensions:"".concat(e,"\xd7").concat(t),previewDimensions:"".concat(Math.round(G.containerWidth),"\xd7").concat(Math.round(G.containerHeight)),actualFontSize:"".concat(s,"px"),previewFontSize:"".concat(a.toFixed(1),"px"),scaleRatio:"".concat((100*G.scale).toFixed(1),"%")}},U[36]=G.containerHeight,U[37]=G.containerWidth,U[38]=G.scale,U[39]=K,U[40]=O.fontSize,U[41]=null==Z?void 0:Z.height,U[42]=null==Z?void 0:Z.width,U[43]=h):h=U[43];let em=h;U[44]!==em?(g=em(),U[44]=em,U[45]=g):g=U[45];let eu=g;U[46]===Symbol.for("react.memo_cache_sentinel")?(p=(0,a.jsxs)(v.ZB,{className:"text-lg flex items-center gap-2",children:[(0,a.jsx)(eJ.A,{className:"w-5 h-5 text-primary"}),"Subtitle Preview"]}),U[46]=p):p=U[46],U[47]===Symbol.for("react.memo_cache_sentinel")?(f=(0,a.jsx)(eM,{htmlFor:"preview-text",className:"text-sm font-medium text-gray-700",children:"Preview Text"}),U[47]=f):f=U[47],U[48]===Symbol.for("react.memo_cache_sentinel")?(x=e=>W(e.target.value),U[48]=x):x=U[48],U[49]!==q?(b=(0,a.jsxs)(v.aR,{className:"pb-3",children:[p,(0,a.jsxs)("div",{className:"space-y-2",children:[f,(0,a.jsx)(eA,{id:"preview-text",value:q,onChange:x,placeholder:"Enter text to preview...",className:"text-sm"})]})]}),U[49]=q,U[50]=b):b=U[50];let eh=(null==Z?void 0:Z.width)&&(null==Z?void 0:Z.height)?"".concat(Z.width,"/").concat(Z.height):"16/9";U[51]!==eh?(y={aspectRatio:eh,minHeight:"200px",maxHeight:"400px",background:"linear-gradient(45deg, #0a0a0a 25%, transparent 25%), linear-gradient(-45deg, #0a0a0a 25%, transparent 25%), linear-gradient(45deg, transparent 75%, #0a0a0a 75%), linear-gradient(-45deg, transparent 75%, #0a0a0a 75%)",backgroundSize:"20px 20px",backgroundPosition:"0 0, 0 10px, 10px -10px, -10px 0px"},U[51]=eh,U[52]=y):y=U[52],U[53]===Symbol.for("react.memo_cache_sentinel")?(j=(0,a.jsx)("div",{className:"text-sm font-medium",children:"Video Preview Area"}),U[53]=j):j=U[53],U[54]!==eu.previewDimensions||U[55]!==eu.scaleRatio||U[56]!==eu.videoDimensions?(w=(0,a.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-gray-900/50 to-gray-800/50 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-gray-600 text-center",children:[j,(0,a.jsxs)("div",{className:"text-xs mt-1",children:[eu.videoDimensions," → ",eu.previewDimensions," (",eu.scaleRatio,")"]})]})}),U[54]=eu.previewDimensions,U[55]=eu.scaleRatio,U[56]=eu.videoDimensions,U[57]=w):w=U[57];let eg=JSON.stringify(O)+q+G.scale,ep=q||"This is how the subtitle will look like";return U[58]!==ed||U[59]!==eg||U[60]!==ep?(S=(0,a.jsx)("div",{style:ed,children:ep},eg),U[58]=ed,U[59]=eg,U[60]=ep,U[61]=S):S=U[61],U[62]===Symbol.for("react.memo_cache_sentinel")?(N=(0,a.jsx)("div",{className:"absolute inset-0 opacity-10 pointer-events-none",children:(0,a.jsxs)("svg",{width:"100%",height:"100%",className:"absolute inset-0",children:[(0,a.jsx)("defs",{children:(0,a.jsx)("pattern",{id:"grid",width:"50",height:"50",patternUnits:"userSpaceOnUse",children:(0,a.jsx)("path",{d:"M 50 0 L 0 0 0 50",fill:"none",stroke:"white",strokeWidth:"0.5"})})}),(0,a.jsx)("rect",{width:"100%",height:"100%",fill:"url(#grid)"})]})}),U[62]=N):N=U[62],U[63]!==y||U[64]!==w||U[65]!==S?(F=(0,a.jsxs)("div",{ref:H,className:"relative bg-black rounded-lg overflow-hidden w-full",style:y,children:[w,S,N]}),U[63]=y,U[64]=w,U[65]=S,U[66]=F):F=U[66],U[67]===Symbol.for("react.memo_cache_sentinel")?(P=(0,a.jsx)("div",{className:"font-medium",children:"Font (Video)"}),U[67]=P):P=U[67],U[68]!==O.fontFamily||U[69]!==O.fontSize?(C=(0,a.jsxs)("div",{className:"bg-gray-50 rounded p-2",children:[P,(0,a.jsxs)("div",{children:[O.fontSize,"px ",O.fontFamily]})]}),U[68]=O.fontFamily,U[69]=O.fontSize,U[70]=C):C=U[70],U[71]===Symbol.for("react.memo_cache_sentinel")?(L=(0,a.jsx)("div",{className:"font-medium",children:"Font (Preview)"}),U[71]=L):L=U[71],U[72]!==eu.previewFontSize?(_=(0,a.jsxs)("div",{className:"bg-gray-50 rounded p-2",children:[L,(0,a.jsxs)("div",{children:[eu.previewFontSize," scaled"]})]}),U[72]=eu.previewFontSize,U[73]=_):_=U[73],U[74]===Symbol.for("react.memo_cache_sentinel")?(k=(0,a.jsx)("div",{className:"font-medium",children:"Position"}),U[74]=k):k=U[74],U[75]!==O.alignment||U[76]!==O.position?(M=(0,a.jsxs)("div",{className:"bg-gray-50 rounded p-2",children:[k,(0,a.jsxs)("div",{children:[O.position," ",O.alignment]})]}),U[75]=O.alignment,U[76]=O.position,U[77]=M):M=U[77],U[78]===Symbol.for("react.memo_cache_sentinel")?(A=(0,a.jsx)("div",{className:"font-medium",children:"Outline"}),U[78]=A):A=U[78],U[79]!==O.outlineWidth?(E=(0,a.jsxs)("div",{className:"bg-gray-50 rounded p-2",children:[A,(0,a.jsxs)("div",{children:[O.outlineWidth,"px"]})]}),U[79]=O.outlineWidth,U[80]=E):E=U[80],U[81]!==C||U[82]!==_||U[83]!==M||U[84]!==E?(T=(0,a.jsxs)("div",{className:"mt-4 grid grid-cols-2 md:grid-cols-4 gap-3 text-xs text-gray-600",children:[C,_,M,E]}),U[81]=C,U[82]=_,U[83]=M,U[84]=E,U[85]=T):T=U[85],U[86]!==eu.actualFontSize||U[87]!==eu.previewDimensions||U[88]!==eu.previewFontSize||U[89]!==eu.scaleRatio||U[90]!==eu.videoDimensions?(D=!1,U[86]=eu.actualFontSize,U[87]=eu.previewDimensions,U[88]=eu.previewFontSize,U[89]=eu.scaleRatio,U[90]=eu.videoDimensions,U[91]=D):D=U[91],U[92]!==F||U[93]!==T||U[94]!==D?(z=(0,a.jsxs)(v.Wu,{children:[F,T,D]}),U[92]=F,U[93]=T,U[94]=D,U[95]=z):z=U[95],U[96]!==b||U[97]!==z?(I=(0,a.jsxs)(v.Zp,{className:"border-primary/20 bg-gradient-to-br from-white to-secondary/30",children:[b,z]}),U[96]=b,U[97]=z,U[98]=I):I=U[98],U[99]!==B||U[100]!==I?(R=(0,a.jsx)("div",{className:B,children:I}),U[99]=B,U[100]=I,U[101]=R):R=U[101],R};var e0=s(8380);function e1(e){let t,s,i,l,o,n,c,d,m=(0,r.c)(25),{file:u,onFileChange:h,accept:g,label:p,icon:f,className:x,children:b}=e;m[0]!==h?(t=e=>{var t;h((null==(t=e.target.files)?void 0:t[0])||null)},m[0]=h,m[1]=t):t=m[1];let y=t,j="".concat(p.toLowerCase().replace(/\s+/g,"-"),"-upload"),w="border-primary/20 hover:border-primary/40 transition-colors bg-gradient-to-br from-white to-secondary/30 ".concat(void 0===x?"":x);m[2]!==f?(s=(0,a.jsx)(f,{className:"w-5 h-5 text-primary"}),m[2]=f,m[3]=s):s=m[3],m[4]!==p||m[5]!==s?(i=(0,a.jsx)(v.aR,{className:"pb-3",children:(0,a.jsxs)(v.ZB,{className:"text-lg flex items-center gap-2",children:[s,p]})}),m[4]=p,m[5]=s,m[6]=i):i=m[6],m[7]!==f?(l=(0,a.jsx)(f,{className:"w-8 h-8 text-primary mb-2"}),m[7]=f,m[8]=l):l=m[8];let S=u?u.name:"Upload ".concat(p.toLowerCase());return m[9]!==S?(o=(0,a.jsx)("span",{className:"text-sm text-gray-600",children:S}),m[9]=S,m[10]=o):o=m[10],m[11]!==g||m[12]!==y||m[13]!==j?(n=(0,a.jsx)(eA,{id:j,type:"file",className:"hidden",accept:g,onChange:y}),m[11]=g,m[12]=y,m[13]=j,m[14]=n):n=m[14],m[15]!==b||m[16]!==j||m[17]!==l||m[18]!==o||m[19]!==n?(c=(0,a.jsx)(v.Wu,{children:(0,a.jsxs)(eM,{htmlFor:j,className:"cursor-pointer border-2 border-dashed border-primary/30 rounded-lg p-6 flex flex-col items-center justify-center text-center hover:bg-secondary/50 transition-colors",children:[l,o,b,n]})}),m[15]=b,m[16]=j,m[17]=l,m[18]=o,m[19]=n,m[20]=c):c=m[20],m[21]!==c||m[22]!==w||m[23]!==i?(d=(0,a.jsxs)(v.Zp,{className:w,children:[i,c]}),m[21]=c,m[22]=w,m[23]=i,m[24]=d):d=m[24],d}let e2=()=>{let e=document.createElement("a");e.href="/sample-video.mp4",e.download="sample-video.mp4",document.body.appendChild(e),e.click(),document.body.removeChild(e)};function e3(e){let t,s,i,l,o=(0,r.c)(10),{className:n}=e,c=void 0===n?"":n,{videoFile:d,videoInfo:m,setVideoFile:u}=eo();return o[0]!==m?(t=m&&(0,a.jsxs)("span",{className:"text-xs text-gray-500 mt-1",children:[m.width,"\xd7",m.height,", ",m.duration.toFixed(1),"s"]}),o[0]=m,o[1]=t):t=o[1],o[2]!==c||o[3]!==u||o[4]!==t||o[5]!==d?(s=(0,a.jsx)(e1,{file:d,onFileChange:u,accept:"video/mp4,video/x-m4v,video/*",label:"Video File",icon:e0.A,className:c,children:t}),o[2]=c,o[3]=u,o[4]=t,o[5]=d,o[6]=s):s=o[6],o[7]===Symbol.for("react.memo_cache_sentinel")?(i=(0,a.jsxs)(x.$,{variant:"outline",size:"sm",onClick:e2,className:"w-full text-xs",children:[(0,a.jsx)(j.A,{className:"w-3 h-3 mr-2"}),"Download Sample Video (10s)"]}),o[7]=i):i=o[7],o[8]!==s?(l=(0,a.jsxs)("div",{className:"space-y-3",children:[s,i]}),o[8]=s,o[9]=l):l=o[9],l}var e4=s(4989);let e5=()=>{let e=document.createElement("a");e.href="/sample-subtitles.srt",e.download="sample-subtitles.srt",document.body.appendChild(e),e.click(),document.body.removeChild(e)};function e6(e){let t,s,i,l,o=(0,r.c)(10),{className:n}=e,c=void 0===n?"":n,{subtitleFile:d,subtitleStats:m,setSubtitleFile:u}=eo();return o[0]!==m?(t=m&&(0,a.jsxs)("span",{className:"text-xs text-gray-500 mt-1",children:[m.relevant,"/",m.total," subtitles relevant"]}),o[0]=m,o[1]=t):t=o[1],o[2]!==c||o[3]!==u||o[4]!==d||o[5]!==t?(s=(0,a.jsx)(e1,{file:d,onFileChange:u,accept:".srt,.vtt,.ass,.ssa",label:"Subtitle File",icon:e4.A,className:c,children:t}),o[2]=c,o[3]=u,o[4]=d,o[5]=t,o[6]=s):s=o[6],o[7]===Symbol.for("react.memo_cache_sentinel")?(i=(0,a.jsxs)(x.$,{variant:"outline",size:"sm",onClick:e5,className:"w-full text-xs",children:[(0,a.jsx)(j.A,{className:"w-3 h-3 mr-2"}),"Download Sample Subtitles (.srt)"]}),o[7]=i):i=o[7],o[8]!==s?(l=(0,a.jsxs)("div",{className:"space-y-3",children:[s,i]}),o[8]=s,o[9]=l):l=o[9],l}var e8=s(5722);function e7(e){let t,s,i,l,o,n,c=(0,r.c)(12);c[0]!==e?({className:t,value:i,...s}=e,c[0]=e,c[1]=t,c[2]=s,c[3]=i):(t=c[1],s=c[2],i=c[3]),c[4]!==t?(l=(0,m.cn)("bg-primary/20 relative h-2 w-full overflow-hidden rounded-full",t),c[4]=t,c[5]=l):l=c[5];let d="translateX(-".concat(100-(i||0),"%)");return c[6]!==d?(o=(0,a.jsx)(e8.C1,{"data-slot":"progress-indicator",className:"bg-primary h-full w-full flex-1 transition-all",style:{transform:d}}),c[6]=d,c[7]=o):o=c[7],c[8]!==s||c[9]!==l||c[10]!==o?(n=(0,a.jsx)(e8.bL,{"data-slot":"progress",className:l,...s,children:o}),c[8]=s,c[9]=l,c[10]=o,c[11]=n):n=c[11],n}function e9(e){let t,s,i,l,o,n,c,d,m,u,h,g,p,f,b,y,j,w=(0,r.c)(44),{progress:S,progressPhase:N,progressETA:F,isProcessing:P,isCancelling:C,memoryUsage:L,memoryLimit:_,onCancel:k}=e;if(!P)return null;let M=N||"Processing Video...";w[0]!==M?(t=(0,a.jsx)("div",{className:"flex flex-col",children:(0,a.jsx)("span",{className:"font-medium text-gray-900",children:M})}),w[0]=M,w[1]=t):t=w[1],w[2]!==S?(s=S.toFixed(1),w[2]=S,w[3]=s):s=w[3],w[4]!==s?(i=(0,a.jsxs)("span",{className:"text-lg font-semibold text-primary",children:[s,"%"]}),w[4]=s,w[5]=i):i=w[5],w[6]!==F?(l=F&&(0,a.jsx)("div",{className:"text-xs text-gray-500",children:F}),w[6]=F,w[7]=l):l=w[7],w[8]!==i||w[9]!==l?(o=(0,a.jsxs)("div",{className:"text-right",children:[i,l]}),w[8]=i,w[9]=l,w[10]=o):o=w[10],w[11]!==t||w[12]!==o?(n=(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[t,o]}),w[11]=t,w[12]=o,w[13]=n):n=w[13],w[14]!==S?(c=(0,a.jsx)(e7,{value:S,className:"w-full h-3"}),w[14]=S,w[15]=c):c=w[15],w[16]===Symbol.for("react.memo_cache_sentinel")?(d=(0,a.jsx)("div",{className:"absolute inset-0 rounded-full bg-gradient-to-r from-transparent via-white/20 to-transparent animate-pulse"}),w[16]=d):d=w[16],w[17]!==c?(m=(0,a.jsxs)("div",{className:"relative",children:[c,d]}),w[17]=c,w[18]=m):m=w[18],w[19]!==L?(u=L>0?(L/1048576).toFixed(1):"~50",w[19]=L,w[20]=u):u=w[20];let A=_&&" / ".concat(_,"MB");return w[21]!==u||w[22]!==A?(h=(0,a.jsxs)("span",{children:["Memory: ",u,"MB",A]}),w[21]=u,w[22]=A,w[23]=h):h=w[23],w[24]!==C?(g=C&&(0,a.jsx)(eb,{variant:"destructive",children:"Cancelling..."}),w[24]=C,w[25]=g):g=w[25],w[26]!==C||w[27]!==P?(p=P&&!C&&(0,a.jsx)("span",{className:"text-primary font-medium",children:"● Processing"}),w[26]=C,w[27]=P,w[28]=p):p=w[28],w[29]!==g||w[30]!==p?(f=(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[g,p]}),w[29]=g,w[30]=p,w[31]=f):f=w[31],w[32]!==h||w[33]!==f?(b=(0,a.jsxs)("div",{className:"flex justify-between items-center text-xs text-gray-500",children:[h,f]}),w[32]=h,w[33]=f,w[34]=b):b=w[34],w[35]!==C||w[36]!==P||w[37]!==k?(y=P&&!C&&(0,a.jsx)("div",{className:"pt-2",children:(0,a.jsx)(x.$,{onClick:k,variant:"outline",size:"sm",className:"w-full border-red-200 text-red-600 hover:bg-red-50",children:"Cancel Processing"})}),w[35]=C,w[36]=P,w[37]=k,w[38]=y):y=w[38],w[39]!==m||w[40]!==b||w[41]!==y||w[42]!==n?(j=(0,a.jsx)("div",{className:"mb-8",children:(0,a.jsx)(v.Zp,{className:"border-primary/20 bg-gradient-to-r from-secondary/50 to-primary/10",children:(0,a.jsx)(v.Wu,{className:"p-6",children:(0,a.jsxs)("div",{className:"space-y-4",children:[n,m,b,y]})})})}),w[39]=m,w[40]=b,w[41]=y,w[42]=n,w[43]=j):j=w[43],j}var te=s(1531),tt=s(745),ts=s(1630),ta=s(4634),tr=s(3470),ti=s(1112);let tl=e=>{let t,s,l,o,n,c,d,m,u,h,g,p,f,x,v,b,y=(0,r.c)(48),{src:j,className:w,placeholder:S,autoplay:N}=e,F=void 0===w?"":w,P=void 0!==N&&N,C=(0,i.useRef)(null),[L,_]=(0,i.useState)(!1),[k,M]=(0,i.useState)(!1),[A,E]=(0,i.useState)(0),[T,D]=(0,i.useState)(0),[z,I]=(0,i.useState)(100),[R,U]=(0,i.useState)(!1),O=(0,i.useRef)(null);y[0]!==P||y[1]!==j?(t=()=>{let e=C.current;if(!e)return;let t=()=>E(e.currentTime),s=()=>D(e.duration),a=()=>_(!1),r=()=>{D(e.duration),P&&j&&e.play().then(()=>{_(!0)}).catch(to)};return e.addEventListener("timeupdate",t),e.addEventListener("loadedmetadata",s),e.addEventListener("loadeddata",r),e.addEventListener("ended",a),()=>{e.removeEventListener("timeupdate",t),e.removeEventListener("loadedmetadata",s),e.removeEventListener("loadeddata",r),e.removeEventListener("ended",a)}},s=[j,P],y[0]=P,y[1]=j,y[2]=t,y[3]=s):(t=y[2],s=y[3]),(0,i.useEffect)(t,s),y[4]!==L?(l=()=>{let e=C.current;e&&(L?e.pause():e.play(),_(!L))},y[4]=L,y[5]=l):l=y[5];let V=l;y[6]!==k?(o=()=>{let e=C.current;e&&(e.muted=!k,M(!k))},y[6]=k,y[7]=o):o=y[7];let B=o;y[8]!==T?(n=e=>{let t=C.current;if(!t)return;let s=e[0]/100*T;t.currentTime=s,E(s)},y[8]=T,y[9]=n):n=y[9];let q=n;y[10]===Symbol.for("react.memo_cache_sentinel")?(c=e=>{let t=C.current;t&&(t.volume=e[0]/100,I(e[0]))},y[10]=c):c=y[10];let W=c;y[11]!==T?(d=e=>{let t=C.current;t&&(t.currentTime=Math.max(0,Math.min(T,t.currentTime+e)))},y[11]=T,y[12]=d):d=y[12];let H=d;y[13]!==L?(m=()=>{O.current&&clearTimeout(O.current),O.current=setTimeout(()=>{L&&U(!1)},3e3)},y[13]=L,y[14]=m):m=y[14];let Z=m,G=tn;if(!j){let e,t,s,r="relative bg-gray-900 rounded-xl overflow-hidden ".concat(F);return y[15]!==S?(e=S||(0,a.jsxs)("div",{className:"text-center text-gray-400",children:[(0,a.jsx)("div",{className:"w-16 h-16 mx-auto mb-4 bg-gray-700 rounded-full flex items-center justify-center",children:(0,a.jsx)(te.A,{className:"w-8 h-8"})}),(0,a.jsx)("p",{className:"text-lg font-medium",children:"No video loaded"}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"Upload a video to see preview"})]}),y[15]=S,y[16]=e):e=y[16],y[17]!==e?(t=(0,a.jsx)("div",{className:"aspect-video flex items-center justify-center",children:e}),y[17]=e,y[18]=t):t=y[18],y[19]!==r||y[20]!==t?(s=(0,a.jsx)("div",{className:r,children:t}),y[19]=r,y[20]=t,y[21]=s):s=y[21],s}let X="relative bg-black rounded-xl overflow-hidden group ".concat(F);return y[22]===Symbol.for("react.memo_cache_sentinel")?(u=()=>U(!0),h=()=>{U(!1),O.current&&clearTimeout(O.current)},y[22]=u,y[23]=h):(u=y[22],h=y[23]),y[24]!==R||y[25]!==Z?(g=()=>{R||U(!0),Z()},y[24]=R,y[25]=Z,y[26]=g):g=y[26],y[27]===Symbol.for("react.memo_cache_sentinel")?(p=()=>_(!0),f=()=>_(!1),y[27]=p,y[28]=f):(p=y[27],f=y[28]),y[29]!==j||y[30]!==V?(x=(0,a.jsx)("video",{ref:C,src:j,className:"w-full h-full aspect-video object-contain",onClick:V,onPlay:p,onPause:f}),y[29]=j,y[30]=V,y[31]=x):x=y[31],y[32]!==A||y[33]!==T||y[34]!==q||y[35]!==k||y[36]!==L||y[37]!==R||y[38]!==H||y[39]!==B||y[40]!==V||y[41]!==z?(v=R&&(0,a.jsxs)("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-transparent to-transparent transition-opacity duration-300",children:[(0,a.jsx)("button",{className:"absolute inset-0 flex items-center justify-center",onClick:V,children:(0,a.jsx)("div",{className:"w-16 h-16 bg-white/20 backdrop-blur-sm rounded-full flex items-center justify-center transition-opacity duration-300 ".concat(R?"opacity-100":"opacity-0"),children:L?(0,a.jsx)(tt.A,{className:"w-8 h-8 text-white"}):(0,a.jsx)(te.A,{className:"w-8 h-8 text-white ml-1"})})}),(0,a.jsxs)("div",{className:"absolute bottom-0 left-0 right-0 p-4 space-y-3",children:[(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)(eH,{value:[T?A/T*100:0],onValueChange:q,max:100,step:.1,className:"w-full"}),(0,a.jsxs)("div",{className:"flex justify-between text-xs text-white/80",children:[(0,a.jsx)("span",{children:G(A)}),(0,a.jsx)("span",{children:G(T)})]})]}),(0,a.jsx)("div",{className:"flex items-center justify-between",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("button",{onClick:()=>H(-10),className:"p-2 text-white/80 hover:text-white transition-colors",children:(0,a.jsx)(ts.A,{className:"w-5 h-5"})}),(0,a.jsx)("button",{onClick:V,className:"p-2 text-white hover:text-orange-400 transition-colors",children:L?(0,a.jsx)(tt.A,{className:"w-6 h-6"}):(0,a.jsx)(te.A,{className:"w-6 h-6"})}),(0,a.jsx)("button",{onClick:()=>H(10),className:"p-2 text-white/80 hover:text-white transition-colors",children:(0,a.jsx)(ta.A,{className:"w-5 h-5"})}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("button",{onClick:B,className:"p-2 text-white/80 hover:text-white transition-colors",children:k?(0,a.jsx)(tr.A,{className:"w-5 h-5"}):(0,a.jsx)(ti.A,{className:"w-5 h-5"})}),(0,a.jsx)(eH,{value:[z],onValueChange:W,max:100,className:"w-20"})]})]})})]})]}),y[32]=A,y[33]=T,y[34]=q,y[35]=k,y[36]=L,y[37]=R,y[38]=H,y[39]=B,y[40]=V,y[41]=z,y[42]=v):v=y[42],y[43]!==X||y[44]!==g||y[45]!==x||y[46]!==v?(b=(0,a.jsxs)("div",{className:X,onMouseEnter:u,onMouseLeave:h,onMouseMove:g,children:[x,v]}),y[43]=X,y[44]=g,y[45]=x,y[46]=v,y[47]=b):b=y[47],b};function to(e){console.warn("Autoplay failed:",e)}function tn(e){let t=Math.floor(e/60),s=Math.floor(e%60);return"".concat(t,":").concat(s.toString().padStart(2,"0"))}function tc(e){let t,s,i,l,o,c=(0,r.c)(15),{downloadUrl:d,outputFormat:m,className:u,title:h,showTitle:g,autoplay:p}=e,f=void 0===h?"Video Result":h,v=void 0===g||g,b="space-y-6 ".concat(void 0===u?"":u);c[0]!==v||c[1]!==f?(t=v&&(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-6",children:[(0,a.jsx)("div",{className:"w-8 h-8 bg-primary rounded-lg flex items-center justify-center",children:(0,a.jsx)(n.A,{className:"w-5 h-5 text-primary-foreground"})}),(0,a.jsx)("h3",{className:"text-2xl font-bold text-gray-900",children:f})]}),c[0]=v,c[1]=f,c[2]=t):t=c[2];let y=(void 0===p||p)&&!!d;return c[3]===Symbol.for("react.memo_cache_sentinel")?(s=(0,a.jsxs)("div",{className:"text-center text-gray-400",children:[(0,a.jsx)("div",{className:"w-16 h-16 mx-auto mb-4 bg-gray-200 rounded-full flex items-center justify-center",children:(0,a.jsx)(te.A,{className:"w-8 h-8 text-gray-400"})}),(0,a.jsx)("p",{className:"text-lg font-medium text-gray-600",children:"Processed Video"}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"Process video to see result"})]}),c[3]=s):s=c[3],c[4]!==d||c[5]!==y?(i=(0,a.jsx)(tl,{src:d,className:"w-full",autoplay:y,placeholder:s}),c[4]=d,c[5]=y,c[6]=i):i=c[6],c[7]!==d||c[8]!==m?(l=d&&(0,a.jsx)("div",{className:"text-center",children:(0,a.jsx)("a",{href:d,download:"video_with_subtitles.".concat(m),children:(0,a.jsxs)(x.$,{size:"lg",className:"bg-gradient-to-r from-green-500 to-green-600 hover:from-green-600 hover:to-green-700 text-white",children:[(0,a.jsx)(j.A,{className:"mr-2 h-5 w-5"}),"Download Video"]})})}),c[7]=d,c[8]=m,c[9]=l):l=c[9],c[10]!==l||c[11]!==b||c[12]!==t||c[13]!==i?(o=(0,a.jsxs)("div",{className:b,children:[t,i,l]}),c[10]=l,c[11]=b,c[12]=t,c[13]=i,c[14]=o):o=c[14],o}function td(e){let t,s,i,l=(0,r.c)(12),{className:o,size:n,variant:c}=e,d=void 0===n?"lg":n,m=void 0===c?"default":c,{videoFile:u,subtitleFile:h,relevantSubtitles:g,videoInfo:p,isProcessing:f,ffmpegLoaded:v,startProcessing:b}=eo(),y=!u||!h||0===g.length||!p||f||!v;l[0]!==v||l[1]!==f||l[2]!==g?(t=()=>f?"Processing Video...":v?"Burn ".concat(g.length||0," Subtitles"):"Loading FFmpeg...",l[0]=v,l[1]=f,l[2]=g,l[3]=t):t=l[3];let j=t,w="font-semibold shadow-lg hover:shadow-xl transition-all duration-300 ".concat(void 0===o?"":o);l[4]===Symbol.for("react.memo_cache_sentinel")?(s=(0,a.jsx)(te.A,{className:"mr-2 h-5 w-5"}),l[4]=s):s=l[4];let S=j();return l[5]!==y||l[6]!==d||l[7]!==b||l[8]!==w||l[9]!==S||l[10]!==m?(i=(0,a.jsxs)(x.$,{onClick:b,disabled:y,size:d,variant:m,className:w,children:[s,S]}),l[5]=y,l[6]=d,l[7]=b,l[8]=w,l[9]=S,l[10]=m,l[11]=i):i=l[11],i}function tm(e){let t,s,i,l=(0,r.c)(12),{tabs:o,activeTab:n,onTabChange:c,className:d}=e,m="flex justify-center mb-8 ".concat(void 0===d?"":d);if(l[0]!==n||l[1]!==c||l[2]!==o){let e;l[4]!==n||l[5]!==c?(e=e=>(0,a.jsxs)("button",{onClick:()=>c(e.id),role:"tab","aria-selected":n===e.id,"data-value":"quickstart"===e.id?"quick":e.id,className:"px-6 py-3 rounded-lg font-medium transition-all duration-300 flex items-center gap-2 ".concat(n===e.id?"bg-primary text-primary-foreground shadow-md":"text-gray-600 hover:text-gray-900"),children:[e.icon&&(0,a.jsx)(e.icon,{className:"w-4 h-4"}),e.label]},e.id),l[4]=n,l[5]=c,l[6]=e):e=l[6],t=o.map(e),l[0]=n,l[1]=c,l[2]=o,l[3]=t}else t=l[3];return l[7]!==t?(s=(0,a.jsx)("div",{className:"bg-secondary rounded-xl p-1 inline-flex",role:"tablist",children:t}),l[7]=t,l[8]=s):s=l[8],l[9]!==m||l[10]!==s?(i=(0,a.jsx)("div",{className:m,"data-tabs":!0,children:s}),l[9]=m,l[10]=s,l[11]=i):i=l[11],i}function tu(e){let t,s=(0,r.c)(3),{tabId:i,activeTab:l,children:o,className:n}=e,c="".concat(l===i?"block":"hidden"," ").concat(void 0===n?"":n);return s[0]!==o||s[1]!==c?(t=(0,a.jsx)("div",{className:c,children:o}),s[0]=o,s[1]=c,s[2]=t):t=s[2],t}function th(e){let t,s,i,l,o,n,c=(0,r.c)(16),{title:d,description:m,icon:u,children:h,className:g}=e,p="space-y-6 ".concat(void 0===g?"":g);return c[0]!==u?(t=u&&(0,a.jsx)("div",{className:"w-8 h-8 bg-primary rounded-lg flex items-center justify-center",children:(0,a.jsx)(u,{className:"w-5 h-5 text-primary-foreground"})}),c[0]=u,c[1]=t):t=c[1],c[2]!==d?(s=(0,a.jsx)("h3",{className:"text-2xl font-bold text-gray-900",children:d}),c[2]=d,c[3]=s):s=c[3],c[4]!==m?(i=m&&(0,a.jsx)("p",{className:"text-gray-600 mt-1",children:m}),c[4]=m,c[5]=i):i=c[5],c[6]!==s||c[7]!==i?(l=(0,a.jsxs)("div",{children:[s,i]}),c[6]=s,c[7]=i,c[8]=l):l=c[8],c[9]!==t||c[10]!==l?(o=(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-6",children:[t,l]}),c[9]=t,c[10]=l,c[11]=o):o=c[11],c[12]!==h||c[13]!==p||c[14]!==o?(n=(0,a.jsxs)("div",{className:p,children:[o,h]}),c[12]=h,c[13]=p,c[14]=o,c[15]=n):n=c[15],n}function tg(){let e,t,s,i,l,c=(0,r.c)(18),{downloadUrl:d,isProcessing:m,progress:u,progressStage:h,progressPhase:g,progressETA:p,isCancelling:f,memoryUsage:x,processingOptions:v,cancelProcessing:b,outputFormat:y}=eo();return c[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)(e3,{}),(0,a.jsx)(e6,{})]}),c[0]=e):e=c[0],c[1]===Symbol.for("react.memo_cache_sentinel")?(t=(0,a.jsx)(td,{className:"w-full bg-primary hover:bg-primary/90 text-primary-foreground py-4 rounded-xl text-lg"}),c[1]=t):t=c[1],c[2]!==b||c[3]!==f||c[4]!==m||c[5]!==x||c[6]!==v.memoryLimit||c[7]!==u||c[8]!==p||c[9]!==g||c[10]!==h?(s=(0,a.jsxs)(th,{title:"Quick Start",icon:o.A,children:[e,(0,a.jsxs)("div",{className:"space-y-4",children:[t,(0,a.jsx)(e9,{progress:u,progressStage:h,progressPhase:g,progressETA:p,isProcessing:m,isCancelling:f,memoryUsage:x,memoryLimit:v.memoryLimit,onCancel:b})]})]}),c[2]=b,c[3]=f,c[4]=m,c[5]=x,c[6]=v.memoryLimit,c[7]=u,c[8]=p,c[9]=g,c[10]=h,c[11]=s):s=c[11],c[12]!==d||c[13]!==y?(i=(0,a.jsx)(th,{title:"Video Result",icon:n.A,children:(0,a.jsx)(tc,{downloadUrl:d,outputFormat:y,showTitle:!1})}),c[12]=d,c[13]=y,c[14]=i):i=c[14],c[15]!==s||c[16]!==i?(l=(0,a.jsxs)("div",{className:"grid lg:grid-cols-2 gap-8 mb-8",children:[s,i]}),c[15]=s,c[16]=i,c[17]=l):l=c[17],l}function tp(){let e,t,s,i,l,o,d,m,u=(0,r.c)(29),{subtitleStyle:h,updateSubtitleStyle:g,processingOptions:p,updateProcessingOptions:f,downloadUrl:x,outputFormat:v,isProcessing:b,progress:y,progressStage:j,progressPhase:w,progressETA:S,isCancelling:N,memoryUsage:F,cancelProcessing:P}=eo();return u[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,a.jsx)("div",{className:"text-center mb-8",children:(0,a.jsx)(th,{title:"Advanced Controls",description:"Fine-tune your subtitle processing with professional options",icon:c.A,children:(0,a.jsxs)("div",{className:"grid md:grid-cols-2 gap-6 mb-8",children:[(0,a.jsx)(e3,{}),(0,a.jsx)(e6,{})]})})}),u[0]=e):e=u[0],u[1]!==p||u[2]!==h||u[3]!==f||u[4]!==g?(t=(0,a.jsx)("div",{className:"space-y-6 order-2 xl:order-1",children:(0,a.jsx)(e$,{style:h,onStyleChange:g,processingOptions:p,onProcessingOptionsChange:f})}),u[1]=p,u[2]=h,u[3]=f,u[4]=g,u[5]=t):t=u[5],u[6]!==h?(s=(0,a.jsx)("div",{className:"space-y-6 order-1 xl:order-2",children:(0,a.jsx)(eK,{style:h})}),u[6]=h,u[7]=s):s=u[7],u[8]!==t||u[9]!==s?(i=(0,a.jsxs)("div",{className:"grid xl:grid-cols-2 gap-8 mb-8",children:[t,s]}),u[8]=t,u[9]=s,u[10]=i):i=u[10],u[11]===Symbol.for("react.memo_cache_sentinel")?(l=(0,a.jsx)(td,{className:"bg-primary hover:bg-primary/90 text-primary-foreground py-4 px-8 rounded-xl text-lg"}),u[11]=l):l=u[11],u[12]!==P||u[13]!==N||u[14]!==b||u[15]!==F||u[16]!==p.memoryLimit||u[17]!==y||u[18]!==S||u[19]!==w||u[20]!==j?(o=(0,a.jsxs)("div",{className:"text-center space-y-4",children:[l,(0,a.jsx)(e9,{progress:y,progressStage:j,progressPhase:w,progressETA:S,isProcessing:b,isCancelling:N,memoryUsage:F,memoryLimit:p.memoryLimit,onCancel:P})]}),u[12]=P,u[13]=N,u[14]=b,u[15]=F,u[16]=p.memoryLimit,u[17]=y,u[18]=S,u[19]=w,u[20]=j,u[21]=o):o=u[21],u[22]!==x||u[23]!==v?(d=(0,a.jsx)(th,{title:"Video Result",icon:n.A,children:(0,a.jsx)(tc,{downloadUrl:x,outputFormat:v,showTitle:!1,className:"max-w-4xl mx-auto"})}),u[22]=x,u[23]=v,u[24]=d):d=u[24],u[25]!==i||u[26]!==o||u[27]!==d?(m=(0,a.jsxs)("div",{className:"max-w-4xl mx-auto space-y-8",children:[e,i,o,d]}),u[25]=i,u[26]=o,u[27]=d,u[28]=m):m=u[28],m}function tf(){let e,t,s,i,l,o=(0,r.c)(9),{error:n,subtitleStats:c}=eo();return o[0]!==n?(e=n&&(0,a.jsxs)(h,{variant:"destructive",children:[(0,a.jsx)(p.A,{className:"h-4 w-4"}),(0,a.jsx)(g,{children:n})]}),o[0]=n,o[1]=e):e=o[1],o[2]===Symbol.for("react.memo_cache_sentinel")?(t=(0,a.jsx)(p.A,{className:"h-4 w-4"}),o[2]=t):t=o[2],o[3]===Symbol.for("react.memo_cache_sentinel")?(s=(0,a.jsxs)(h,{children:[t,(0,a.jsxs)(g,{children:[(0,a.jsx)("strong",{children:"Smart Processing:"})," Automatically filters subtitles to only process those within your video duration, saving time and resources."]})]}),o[3]=s):s=o[3],o[4]!==c?(i=c&&c.filtered>0&&(0,a.jsxs)(h,{children:[(0,a.jsx)(f.A,{className:"h-4 w-4"}),(0,a.jsxs)(g,{children:[(0,a.jsx)("strong",{children:"Optimization Active:"})," ",c.filtered," subtitles filtered out (only processing ",c.relevant,"/",c.total," relevant subtitles)"]})]}),o[4]=c,o[5]=i):i=o[5],o[6]!==e||o[7]!==i?(l=(0,a.jsxs)("div",{className:"space-y-4 mb-4",children:[e,s,i]}),o[6]=e,o[7]=i,o[8]=l):l=o[8],l}function tx(){let e,t,s,n,d,m,u,h,g,p,f,x,v,b,y,j,w,S=(0,r.c)(40),[F,P]=(0,i.useState)("quickstart"),[C,_]=(0,i.useState)(!1),{setScriptLoaded:k,setError:M,addLog:A,memoryUsage:E,processingOptions:T,isProcessing:D,logs:z,totalLogCount:I,clearLogs:R}=eo();S[0]===Symbol.for("react.memo_cache_sentinel")?(e=()=>{let e=e=>{let t=e.detail;("advanced"===t||"quick"===t)&&P("advanced"===t?"advanced":"quickstart")};return window.addEventListener("restoreActiveTab",e),()=>window.removeEventListener("restoreActiveTab",e)},t=[],S[0]=e,S[1]=t):(e=S[0],t=S[1]),(0,i.useEffect)(e,t),S[2]===Symbol.for("react.memo_cache_sentinel")?(s=[{id:"quickstart",label:"Quick Start",icon:o.A},{id:"advanced",label:"Advanced",icon:c.A}],S[2]=s):s=S[2];let U=s;return S[3]===Symbol.for("react.memo_cache_sentinel")?(n=(0,a.jsx)(L,{}),S[3]=n):n=S[3],S[4]!==R||S[5]!==D||S[6]!==z||S[7]!==I?(d=(0,a.jsx)("div",{className:"fixed bottom-4 right-4 z-50",children:(0,a.jsx)(e_,{logs:z,isProcessing:D,onClearLogs:R,totalLogCount:I})}),S[4]=R,S[5]=D,S[6]=z,S[7]=I,S[8]=d):d=S[8],S[9]!==D||S[10]!==E||S[11]!==T.memoryLimit?(m=(0,a.jsx)(N,{memoryUsage:E,memoryLimit:T.memoryLimit,isProcessing:D}),S[9]=D,S[10]=E,S[11]=T.memoryLimit,S[12]=m):m=S[12],S[13]!==A||S[14]!==C||S[15]!==k?(u=()=>{C||(_(!0),k(!0),A("ffmpeg-core.js loaded"))},S[13]=A,S[14]=C,S[15]=k,S[16]=u):u=S[16],S[17]!==A||S[18]!==M?(h=e=>{M("Failed to load ffmpeg-core.js: ".concat(e.message)),A("ffmpeg-core.js load error: ".concat(e.message))},S[17]=A,S[18]=M,S[19]=h):h=S[19],S[20]!==u||S[21]!==h?(g=(0,a.jsx)(l.default,{src:"https://unpkg.com/@ffmpeg/core@0.12.6/dist/umd/ffmpeg-core.js",strategy:"afterInteractive",onLoad:u,onError:h}),S[20]=u,S[21]=h,S[22]=g):g=S[22],S[23]===Symbol.for("react.memo_cache_sentinel")?(p=(0,a.jsx)(tf,{}),S[23]=p):p=S[23],S[24]!==F?(f=(0,a.jsx)(tm,{tabs:U,activeTab:F,onTabChange:P}),S[24]=F,S[25]=f):f=S[25],S[26]===Symbol.for("react.memo_cache_sentinel")?(x=(0,a.jsx)(tg,{}),S[26]=x):x=S[26],S[27]!==F?(v=(0,a.jsx)(tu,{tabId:"quickstart",activeTab:F,children:x}),S[27]=F,S[28]=v):v=S[28],S[29]===Symbol.for("react.memo_cache_sentinel")?(b=(0,a.jsx)(tp,{}),S[29]=b):b=S[29],S[30]!==F?(y=(0,a.jsx)(tu,{tabId:"advanced",activeTab:F,children:b}),S[30]=F,S[31]=y):y=S[31],S[32]===Symbol.for("react.memo_cache_sentinel")?(j=(0,a.jsx)(en,{}),S[32]=j):j=S[32],S[33]!==f||S[34]!==v||S[35]!==y||S[36]!==d||S[37]!==m||S[38]!==g?(w=(0,a.jsxs)("div",{className:"p-8 relative",children:[n,d,m,g,p,f,v,y,j]}),S[33]=f,S[34]=v,S[35]=y,S[36]=d,S[37]=m,S[38]=g,S[39]=w):w=S[39],w}let tv=()=>{let e,t=(0,r.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,a.jsx)(w,{children:(0,a.jsx)(tx,{})}),t[0]=e):e=t[0],e}}}]);