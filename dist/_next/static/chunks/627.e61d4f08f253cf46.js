(()=>{"use strict";var e;let r,t="https://unpkg.com/@ffmpeg/core@0.12.6/dist/umd/ffmpeg-core.js";!function(e){e.LOAD="LOAD",e.EXEC="EXEC",e.WRITE_FILE="WRITE_FILE",e.READ_FILE="READ_FILE",e.DELETE_FILE="DELETE_FILE",e.RENAME="RENAME",e.CREATE_DIR="CREATE_DIR",e.LIST_DIR="LIST_DIR",e.DELETE_DIR="DELETE_DIR",e.ERROR="ERROR",e.DOWNLOAD="DOWNLOAD",e.PROGRESS="PROGRESS",e.LOG="LOG",e.MOUNT="MOUNT",e.UNMOUNT="UNMOUNT"}(e||(e={}));let a=Error("unknown message type"),s=Error("ffmpeg is not loaded, call `await ffmpeg.load()` first");Error("called FFmpeg.terminate()");let E=Error("failed to import ffmpeg-core.js"),o=async({coreURL:a,wasmURL:s,workerURL:o})=>{let R=!r;try{a||(a=t),importScripts(a)}catch{if(a||(a=t.replace("/umd/","/esm/")),self.createFFmpegCore=(await import(a)).default,!self.createFFmpegCore)throw E}let c=a,l=s||a.replace(/.js$/g,".wasm"),i=o||a.replace(/.js$/g,".worker.js");return(r=await self.createFFmpegCore({mainScriptUrlOrBlob:`${c}#${btoa(JSON.stringify({wasmURL:l,workerURL:i}))}`})).setLogger(r=>self.postMessage({type:e.LOG,data:r})),r.setProgress(r=>self.postMessage({type:e.PROGRESS,data:r})),R};self.onmessage=async({data:{id:t,type:E,data:R}})=>{let c,l=[];try{if(E!==e.LOAD&&!r)throw s;switch(E){case e.LOAD:c=await o(R);break;case e.EXEC:c=(({args:e,timeout:t=-1})=>{r.setTimeout(t),r.exec(...e);let a=r.ret;return r.reset(),a})(R);break;case e.WRITE_FILE:c=(({path:e,data:t})=>(r.FS.writeFile(e,t),!0))(R);break;case e.READ_FILE:c=(({path:e,encoding:t})=>r.FS.readFile(e,{encoding:t}))(R);break;case e.DELETE_FILE:c=(({path:e})=>(r.FS.unlink(e),!0))(R);break;case e.RENAME:c=(({oldPath:e,newPath:t})=>(r.FS.rename(e,t),!0))(R);break;case e.CREATE_DIR:c=(({path:e})=>(r.FS.mkdir(e),!0))(R);break;case e.LIST_DIR:c=(({path:e})=>{let t=r.FS.readdir(e),a=[];for(let s of t){let t=r.FS.stat(`${e}/${s}`),E=r.FS.isDir(t.mode);a.push({name:s,isDir:E})}return a})(R);break;case e.DELETE_DIR:c=(({path:e})=>(r.FS.rmdir(e),!0))(R);break;case e.MOUNT:c=(({fsType:e,options:t,mountPoint:a})=>{let s=r.FS.filesystems[e];return!!s&&(r.FS.mount(s,t,a),!0)})(R);break;case e.UNMOUNT:c=(({mountPoint:e})=>(r.FS.unmount(e),!0))(R);break;default:throw a}}catch(r){self.postMessage({id:t,type:e.ERROR,data:r.toString()});return}c instanceof Uint8Array&&l.push(c.buffer),self.postMessage({id:t,type:E,data:c},l)}})(),_N_E={};